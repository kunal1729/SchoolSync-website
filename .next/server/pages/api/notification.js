"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/notification";
exports.ids = ["pages/api/notification"];
exports.modules = {

/***/ "md5":
/*!**********************!*\
  !*** external "md5" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("md5");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "swr":
/*!**********************!*\
  !*** external "swr" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("swr");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotification&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cnotification%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotification&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cnotification%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_notification_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\notification\\index.ts */ \"(api)/./pages/api/notification/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_notification_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_notification_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_notification_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_notification_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/notification\",\n        pathname: \"/api/notification\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_notification_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5vdGlmaWNhdGlvbiZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDbm90aWZpY2F0aW9uJTVDaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDaUU7QUFDakU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDZEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw2REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvPzY0N2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxub3RpZmljYXRpb25cXFxcaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ub3RpZmljYXRpb25cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ub3RpZmljYXRpb25cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotification&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cnotification%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/DB.ts":
/*!*******************!*\
  !*** ./lib/DB.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientPromise: () => (/* binding */ clientPromise),\n/* harmony export */   mongoUri: () => (/* binding */ mongoUri)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst mongoUri = process.env.MONGO_URI;\nif (!mongoUri) {\n    throw new Error(\"Please define the MONGO_URI environment variable inside .env\");\n}\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    //@ts-ignore\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(mongoUri);\n        //@ts-ignore\n        global._mongoClientPromise = client.connect();\n    }\n    //@ts-ignore\n    clientPromise = global._mongoClientPromise;\n} else {}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvREIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzQztBQUUvQixNQUFNQyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLFNBQVMsQ0FBQztBQUU5QyxJQUFJLENBQUNILFVBQVU7SUFDYixNQUFNLElBQUlJLE1BQ1I7QUFFSjtBQUVBLElBQUlDO0FBQ0osSUFBSUM7QUFFSixJQUFJTCxJQUFzQyxFQUFFO0lBQzFDLCtEQUErRDtJQUMvRCw2RUFBNkU7SUFDN0UsWUFBWTtJQUNaLElBQUksQ0FBQ00sT0FBT0MsbUJBQW1CLEVBQUU7UUFDL0JILFNBQVMsSUFBSU4sZ0RBQVdBLENBQUNDO1FBQ3pCLFlBQVk7UUFDWk8sT0FBT0MsbUJBQW1CLEdBQUdILE9BQU9JLE9BQU87SUFDN0M7SUFDQSxZQUFZO0lBQ1pILGdCQUFnQkMsT0FBT0MsbUJBQW1CO0FBQzVDLE9BQU8sRUFJTjtBQUV3QiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL2xpYi9EQi50cz8wM2ZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBtb25nb1VyaSA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSSTtcclxuXHJcbmlmICghbW9uZ29VcmkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICBcIlBsZWFzZSBkZWZpbmUgdGhlIE1PTkdPX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudlwiXHJcbiAgKTtcclxufVxyXG5cclxubGV0IGNsaWVudDtcclxubGV0IGNsaWVudFByb21pc2U6IFByb21pc2U8TW9uZ29DbGllbnQ+O1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcclxuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcclxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxyXG4gIC8vQHRzLWlnbm9yZVxyXG4gIGlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChtb25nb1VyaSk7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcclxuICB9XHJcbiAgLy9AdHMtaWdub3JlXHJcbiAgY2xpZW50UHJvbWlzZSA9IGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlO1xyXG59IGVsc2Uge1xyXG4gIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXHJcbiAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KG1vbmdvVXJpKTtcclxuICBjbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcclxufVxyXG5cclxuZXhwb3J0IHsgY2xpZW50UHJvbWlzZSB9O1xyXG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJtb25nb1VyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJFcnJvciIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/DB.ts\n");

/***/ }),

/***/ "(api)/./lib/functions.ts":
/*!**************************!*\
  !*** ./lib/functions.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   capitalizeFirstLetter: () => (/* binding */ capitalizeFirstLetter),\n/* harmony export */   editUser: () => (/* binding */ editUser),\n/* harmony export */   escapeMarkdown: () => (/* binding */ escapeMarkdown),\n/* harmony export */   fetcher: () => (/* binding */ fetcher),\n/* harmony export */   formatDateTime: () => (/* binding */ formatDateTime),\n/* harmony export */   getRoleAndId: () => (/* binding */ getRoleAndId),\n/* harmony export */   getRoleColor: () => (/* binding */ getRoleColor),\n/* harmony export */   useCourseMembers: () => (/* binding */ useCourseMembers),\n/* harmony export */   useCoursePage: () => (/* binding */ useCoursePage),\n/* harmony export */   useCourses: () => (/* binding */ useCourses),\n/* harmony export */   useUserSearch: () => (/* binding */ useUserSearch),\n/* harmony export */   validateLogin: () => (/* binding */ validateLogin)\n/* harmony export */ });\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ \"swr\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([swr__WEBPACK_IMPORTED_MODULE_1__]);\nswr__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function validateLogin(email, password, usersCollection) {\n    const user = await usersCollection.findOne({\n        email: email\n    });\n    console.log(user);\n    const passwordHash = md5__WEBPACK_IMPORTED_MODULE_0___default()(password);\n    if (!user) {\n        return null;\n    }\n    if (user.passwordHash !== passwordHash) {\n        return null;\n    }\n    return {\n        email: user.email,\n        name: user.name,\n        image: user.profilePicture\n    };\n}\nasync function getRoleAndId(email, usersCollection) {\n    const user = await usersCollection.findOne({\n        email: email\n    });\n    const role = user?.role;\n    const id = user?._id;\n    return {\n        role,\n        id\n    };\n}\nfunction capitalizeFirstLetter(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n// @ts-ignore\nconst fetcher = (...args)=>// @ts-ignore\n    fetch(...args).then((res)=>res.json()).catch((err)=>console.error(err));\nfunction getRoleColor(role) {\n    let roleColor = \"gray\";\n    if (role === \"Student\") {\n        roleColor = \"blue\";\n    } else if (role === \"Admin\" || role === \"All\") {\n        roleColor = \"red\";\n    } else if (role === \"Faculty\") {\n        roleColor = \"green\";\n    }\n    return roleColor;\n}\nasync function editUser(newUserData) {\n    const formData = new FormData();\n    //allowed entries are name, profile picture, phone and password only:\n    const allowedEntries = [\n        \"name\",\n        \"phone\",\n        \"password\",\n        \"profilePicture\",\n        \"userId\",\n        \"oldPicture\"\n    ];\n    // the key should only consider those entries which are not empty and allowed\n    for(let key in newUserData){\n        if (allowedEntries.includes(key) && newUserData[key]) {\n            // @ts-ignore\n            formData.append(key, newUserData[key]);\n        }\n    }\n    if (!formData.get(\"profilePicture\")) {\n        formData.delete(\"oldPicture\");\n    }\n    if (newUserData.hasOwnProperty(\"_id\")) {\n        formData.append(\"userId\", newUserData._id);\n    }\n    const res = await fetch(\"/api/user\", {\n        method: \"PUT\",\n        body: formData\n    });\n    return res;\n}\nfunction formatDateTime(date) {\n    const time = date.toLocaleTimeString([], {\n        hour: \"numeric\",\n        minute: \"2-digit\"\n    });\n    const formattedTime = time.toLowerCase().replace(/\\s/g, \"\");\n    const formattedDate = date.toLocaleDateString([\n        \"en-GB\"\n    ], {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\"\n    });\n    const formattedDateTime = `${formattedTime} • ${formattedDate}`;\n    return formattedDateTime;\n}\nfunction escapeMarkdown(text) {\n    const markdownRegex = /[#\\][*_~`!@#$%^&*()\"']/g;\n    // Replace all matched markdown elements with an empty string\n    const resultText = text.replace(markdownRegex, \"\");\n    return resultText;\n}\nfunction useUserSearch(searchQuery, role, page) {\n    const { data, error, isLoading, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/allUsers/search?searchQuery=${searchQuery}&page=${page}&role=${role}`, fetcher);\n    return {\n        users: data,\n        isLoading,\n        error: error,\n        mutate\n    };\n}\nfunction useCourses(page, search, type) {\n    const { data, isLoading, error, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/course/list?page=${page}&type=${type}&searchQuery=${search}`, fetcher);\n    return {\n        courses: data,\n        isLoading,\n        error,\n        mutate\n    };\n}\nfunction useCoursePage(courseId) {\n    const { data, error, isLoading, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/course/${courseId}`, fetcher);\n    return {\n        course: data,\n        isLoading,\n        error,\n        mutate\n    };\n}\nfunction useCourseMembers(courseId, page, search, memberType, notEnrolledOnly = false) {\n    const { data, error, isLoading, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/course/${courseId}/member?page=${page}&memberType=${memberType}&searchQuery=${search}&&notEnrolledOnly=${notEnrolledOnly}`, fetcher);\n    return {\n        members: data,\n        isLoading,\n        error,\n        mutate\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZnVuY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFzQjtBQUNHO0FBRWxCLGVBQWVFLGNBQ3BCQyxLQUFhLEVBQ2JDLFFBQWdCLEVBQ2hCQyxlQUFvQztJQUVwQyxNQUFNQyxPQUFPLE1BQU1ELGdCQUFnQkUsT0FBTyxDQUFDO1FBQUVKLE9BQU9BO0lBQU07SUFDMURLLFFBQVFDLEdBQUcsQ0FBQ0g7SUFFWixNQUFNSSxlQUFlViwwQ0FBR0EsQ0FBQ0k7SUFDekIsSUFBSSxDQUFDRSxNQUFNO1FBQ1QsT0FBTztJQUNUO0lBQ0EsSUFBSUEsS0FBS0ksWUFBWSxLQUFLQSxjQUFjO1FBQ3RDLE9BQU87SUFDVDtJQUVBLE9BQU87UUFDTFAsT0FBT0csS0FBS0gsS0FBSztRQUNqQlEsTUFBTUwsS0FBS0ssSUFBSTtRQUNmQyxPQUFPTixLQUFLTyxjQUFjO0lBQzVCO0FBQ0Y7QUFFTyxlQUFlQyxhQUNwQlgsS0FBYSxFQUNiRSxlQUFvQztJQUVwQyxNQUFNQyxPQUFPLE1BQU1ELGdCQUFnQkUsT0FBTyxDQUFDO1FBQUVKLE9BQU9BO0lBQU07SUFFMUQsTUFBTVksT0FBT1QsTUFBTVM7SUFDbkIsTUFBTUMsS0FBS1YsTUFBTVc7SUFFakIsT0FBTztRQUFFRjtRQUFNQztJQUFHO0FBQ3BCO0FBRU8sU0FBU0Usc0JBQXNCQyxDQUFTO0lBQzdDLE9BQU9BLEVBQUVDLE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQUtGLEVBQUVHLEtBQUssQ0FBQztBQUM3QztBQUVBLGFBQWE7QUFDTixNQUFNQyxVQUFVLENBQUMsR0FBR0MsT0FDekIsYUFBYTtJQUViQyxTQUFTRCxNQUNORSxJQUFJLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSUMsSUFBSSxJQUN0QkMsS0FBSyxDQUFDLENBQUNDLE1BQVF0QixRQUFRdUIsS0FBSyxDQUFDRCxNQUFNO0FBRWpDLFNBQVNFLGFBQWFqQixJQUFrQjtJQUM3QyxJQUFJa0IsWUFBWTtJQUNoQixJQUFJbEIsU0FBUyxXQUFXO1FBQ3RCa0IsWUFBWTtJQUNkLE9BQU8sSUFBSWxCLFNBQVMsV0FBV0EsU0FBUyxPQUFPO1FBQzdDa0IsWUFBWTtJQUNkLE9BQU8sSUFBSWxCLFNBQVMsV0FBVztRQUM3QmtCLFlBQVk7SUFDZDtJQUNBLE9BQU9BO0FBQ1Q7QUFDTyxlQUFlQyxTQUNwQkMsV0FBcUQ7SUFFckQsTUFBTUMsV0FBVyxJQUFJQztJQUVyQixxRUFBcUU7SUFDckUsTUFBTUMsaUJBQWlCO1FBQ3JCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsNkVBQTZFO0lBRTdFLElBQUssSUFBSUMsT0FBT0osWUFBYTtRQUMzQixJQUNFRyxlQUFlRSxRQUFRLENBQUNELFFBQ3hCSixXQUFXLENBQUNJLElBQW9DLEVBQ2hEO1lBQ0EsYUFBYTtZQUNiSCxTQUFTSyxNQUFNLENBQUNGLEtBQUtKLFdBQVcsQ0FBQ0ksSUFBSTtRQUN2QztJQUNGO0lBQ0EsSUFBSSxDQUFDSCxTQUFTTSxHQUFHLENBQUMsbUJBQW1CO1FBQ25DTixTQUFTTyxNQUFNLENBQUM7SUFDbEI7SUFDQSxJQUFJUixZQUFZUyxjQUFjLENBQUMsUUFBUTtRQUNyQ1IsU0FBU0ssTUFBTSxDQUFDLFVBQVVOLFlBQVlsQixHQUFHO0lBQzNDO0lBRUEsTUFBTVUsTUFBTSxNQUFNRixNQUFNLGFBQWE7UUFDbkNvQixRQUFRO1FBQ1JDLE1BQU1WO0lBQ1I7SUFFQSxPQUFPVDtBQUNUO0FBRU8sU0FBU29CLGVBQWVDLElBQVU7SUFDdkMsTUFBTUMsT0FBT0QsS0FBS0Usa0JBQWtCLENBQUMsRUFBRSxFQUFFO1FBQ3ZDQyxNQUFNO1FBQ05DLFFBQVE7SUFDVjtJQUNBLE1BQU1DLGdCQUFnQkosS0FBS0ssV0FBVyxHQUFHQyxPQUFPLENBQUMsT0FBTztJQUV4RCxNQUFNQyxnQkFBZ0JSLEtBQUtTLGtCQUFrQixDQUFDO1FBQUM7S0FBUSxFQUFFO1FBQ3ZEQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsTUFBTTtJQUNSO0lBRUEsTUFBTUMsb0JBQW9CLENBQUMsRUFBRVIsY0FBYyxHQUFHLEVBQUVHLGNBQWMsQ0FBQztJQUMvRCxPQUFPSztBQUNUO0FBRU8sU0FBU0MsZUFBZUMsSUFBWTtJQUN6QyxNQUFNQyxnQkFBZ0I7SUFFdEIsNkRBQTZEO0lBQzdELE1BQU1DLGFBQWFGLEtBQUtSLE9BQU8sQ0FBQ1MsZUFBZTtJQUUvQyxPQUFPQztBQUNUO0FBRU8sU0FBU0MsY0FBY0MsV0FBbUIsRUFBRXBELElBQVksRUFBRXFELElBQVk7SUFDM0UsTUFBTSxFQUFFQyxJQUFJLEVBQUV0QyxLQUFLLEVBQUV1QyxTQUFTLEVBQUVDLE1BQU0sRUFBRSxHQUFHdEUsK0NBQU1BLENBQy9DLENBQUMsaUNBQWlDLEVBQUVrRSxZQUFZLE1BQU0sRUFBRUMsS0FBSyxNQUFNLEVBQUVyRCxLQUFLLENBQUMsRUFDM0VRO0lBRUYsT0FBTztRQUNMaUQsT0FBT0g7UUFDUEM7UUFDQXZDLE9BQU9BO1FBQ1B3QztJQUNGO0FBQ0Y7QUFFTyxTQUFTRSxXQUNkTCxJQUFZLEVBQ1pNLE1BQWMsRUFDZEMsSUFBcUQ7SUFFckQsTUFBTSxFQUFFTixJQUFJLEVBQUVDLFNBQVMsRUFBRXZDLEtBQUssRUFBRXdDLE1BQU0sRUFBRSxHQUFHdEUsK0NBQU1BLENBQy9DLENBQUMsc0JBQXNCLEVBQUVtRSxLQUFLLE1BQU0sRUFBRU8sS0FBSyxhQUFhLEVBQUVELE9BQU8sQ0FBQyxFQUNsRW5EO0lBRUYsT0FBTztRQUNMcUQsU0FBU1A7UUFDVEM7UUFDQXZDO1FBQ0F3QztJQUNGO0FBQ0Y7QUFDTyxTQUFTTSxjQUFjQyxRQUFnQjtJQUM1QyxNQUFNLEVBQUVULElBQUksRUFBRXRDLEtBQUssRUFBRXVDLFNBQVMsRUFBRUMsTUFBTSxFQUFFLEdBQUd0RSwrQ0FBTUEsQ0FDL0MsQ0FBQyxZQUFZLEVBQUU2RSxTQUFTLENBQUMsRUFDekJ2RDtJQUVGLE9BQU87UUFDTHdELFFBQVFWO1FBQ1JDO1FBQ0F2QztRQUNBd0M7SUFDRjtBQUNGO0FBRU8sU0FBU1MsaUJBQ2RGLFFBQWdCLEVBQ2hCVixJQUFZLEVBQ1pNLE1BQWMsRUFDZE8sVUFBaUMsRUFDakNDLGtCQUFrQixLQUFLO0lBRXZCLE1BQU0sRUFBRWIsSUFBSSxFQUFFdEMsS0FBSyxFQUFFdUMsU0FBUyxFQUFFQyxNQUFNLEVBQUUsR0FBR3RFLCtDQUFNQSxDQUMvQyxDQUFDLFlBQVksRUFBRTZFLFNBQVMsYUFBYSxFQUFFVixLQUFLLFlBQVksRUFBRWEsV0FBVyxhQUFhLEVBQUVQLE9BQU8sa0JBQWtCLEVBQUVRLGdCQUFnQixDQUFDLEVBQ2hJM0Q7SUFFRixPQUFPO1FBQ0w0RCxTQUFTZDtRQUNUQztRQUNBdkM7UUFDQXdDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL2xpYi9mdW5jdGlvbnMudHM/ODEyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0aW9uLCBNb25nb0NsaWVudCB9IGZyb20gXCJtb25nb2RiXCI7XHJcbmltcG9ydCB7XHJcbiAgQ291cnNlSW5mb3JtYXRpb24sXHJcbiAgUmVjZWl2ZWRVc2VyRGF0YU9uQ2xpZW50LFxyXG4gIFJvbGUsXHJcbiAgU2VudFVzZXJEYXRhRnJvbUNsaWVudCxcclxuICBVc2VyQ29sLFxyXG59IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCBtZDUgZnJvbSBcIm1kNVwiO1xyXG5pbXBvcnQgdXNlU1dSIGZyb20gXCJzd3JcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUxvZ2luKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZyxcclxuICB1c2Vyc0NvbGxlY3Rpb246IENvbGxlY3Rpb248VXNlckNvbD5cclxuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pO1xyXG4gIGNvbnNvbGUubG9nKHVzZXIpO1xyXG5cclxuICBjb25zdCBwYXNzd29yZEhhc2ggPSBtZDUocGFzc3dvcmQpO1xyXG4gIGlmICghdXNlcikge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGlmICh1c2VyLnBhc3N3b3JkSGFzaCAhPT0gcGFzc3dvcmRIYXNoKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgIGltYWdlOiB1c2VyLnByb2ZpbGVQaWN0dXJlLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSb2xlQW5kSWQoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICB1c2Vyc0NvbGxlY3Rpb246IENvbGxlY3Rpb248VXNlckNvbD5cclxuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pO1xyXG5cclxuICBjb25zdCByb2xlID0gdXNlcj8ucm9sZTtcclxuICBjb25zdCBpZCA9IHVzZXI/Ll9pZDtcclxuXHJcbiAgcmV0dXJuIHsgcm9sZSwgaWQgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdExldHRlcihzOiBzdHJpbmcpIHtcclxuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XHJcbn1cclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuZXhwb3J0IGNvbnN0IGZldGNoZXIgPSAoLi4uYXJncykgPT5cclxuICAvLyBAdHMtaWdub3JlXHJcblxyXG4gIGZldGNoKC4uLmFyZ3MpXHJcbiAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9sZUNvbG9yKHJvbGU6IFJvbGUgfCBcIkFsbFwiKSB7XHJcbiAgbGV0IHJvbGVDb2xvciA9IFwiZ3JheVwiO1xyXG4gIGlmIChyb2xlID09PSBcIlN0dWRlbnRcIikge1xyXG4gICAgcm9sZUNvbG9yID0gXCJibHVlXCI7XHJcbiAgfSBlbHNlIGlmIChyb2xlID09PSBcIkFkbWluXCIgfHwgcm9sZSA9PT0gXCJBbGxcIikge1xyXG4gICAgcm9sZUNvbG9yID0gXCJyZWRcIjtcclxuICB9IGVsc2UgaWYgKHJvbGUgPT09IFwiRmFjdWx0eVwiKSB7XHJcbiAgICByb2xlQ29sb3IgPSBcImdyZWVuXCI7XHJcbiAgfVxyXG4gIHJldHVybiByb2xlQ29sb3I7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVkaXRVc2VyKFxyXG4gIG5ld1VzZXJEYXRhOiBTZW50VXNlckRhdGFGcm9tQ2xpZW50ICYgeyBfaWQ6IHN0cmluZyB9XHJcbikge1xyXG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcblxyXG4gIC8vYWxsb3dlZCBlbnRyaWVzIGFyZSBuYW1lLCBwcm9maWxlIHBpY3R1cmUsIHBob25lIGFuZCBwYXNzd29yZCBvbmx5OlxyXG4gIGNvbnN0IGFsbG93ZWRFbnRyaWVzID0gW1xyXG4gICAgXCJuYW1lXCIsXHJcbiAgICBcInBob25lXCIsXHJcbiAgICBcInBhc3N3b3JkXCIsXHJcbiAgICBcInByb2ZpbGVQaWN0dXJlXCIsXHJcbiAgICBcInVzZXJJZFwiLFxyXG4gICAgXCJvbGRQaWN0dXJlXCIsXHJcbiAgXTtcclxuXHJcbiAgLy8gdGhlIGtleSBzaG91bGQgb25seSBjb25zaWRlciB0aG9zZSBlbnRyaWVzIHdoaWNoIGFyZSBub3QgZW1wdHkgYW5kIGFsbG93ZWRcclxuXHJcbiAgZm9yIChsZXQga2V5IGluIG5ld1VzZXJEYXRhKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGFsbG93ZWRFbnRyaWVzLmluY2x1ZGVzKGtleSkgJiZcclxuICAgICAgbmV3VXNlckRhdGFba2V5IGFzIGtleW9mIFNlbnRVc2VyRGF0YUZyb21DbGllbnRdXHJcbiAgICApIHtcclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCBuZXdVc2VyRGF0YVtrZXldKTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKCFmb3JtRGF0YS5nZXQoXCJwcm9maWxlUGljdHVyZVwiKSkge1xyXG4gICAgZm9ybURhdGEuZGVsZXRlKFwib2xkUGljdHVyZVwiKTtcclxuICB9XHJcbiAgaWYgKG5ld1VzZXJEYXRhLmhhc093blByb3BlcnR5KFwiX2lkXCIpKSB7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJ1c2VySWRcIiwgbmV3VXNlckRhdGEuX2lkKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS91c2VyXCIsIHtcclxuICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgIGJvZHk6IGZvcm1EYXRhLFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoZGF0ZTogRGF0ZSkge1xyXG4gIGNvbnN0IHRpbWUgPSBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyhbXSwge1xyXG4gICAgaG91cjogXCJudW1lcmljXCIsXHJcbiAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxyXG4gIH0pO1xyXG4gIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSB0aW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csIFwiXCIpO1xyXG5cclxuICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoW1wiZW4tR0JcIl0sIHtcclxuICAgIGRheTogXCIyLWRpZ2l0XCIsXHJcbiAgICBtb250aDogXCIyLWRpZ2l0XCIsXHJcbiAgICB5ZWFyOiBcIm51bWVyaWNcIixcclxuICB9KTtcclxuXHJcbiAgY29uc3QgZm9ybWF0dGVkRGF0ZVRpbWUgPSBgJHtmb3JtYXR0ZWRUaW1lfSDigKIgJHtmb3JtYXR0ZWREYXRlfWA7XHJcbiAgcmV0dXJuIGZvcm1hdHRlZERhdGVUaW1lO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlTWFya2Rvd24odGV4dDogc3RyaW5nKSB7XHJcbiAgY29uc3QgbWFya2Rvd25SZWdleCA9IC9bI1xcXVsqX35gIUAjJCVeJiooKVwiJ10vZztcclxuXHJcbiAgLy8gUmVwbGFjZSBhbGwgbWF0Y2hlZCBtYXJrZG93biBlbGVtZW50cyB3aXRoIGFuIGVtcHR5IHN0cmluZ1xyXG4gIGNvbnN0IHJlc3VsdFRleHQgPSB0ZXh0LnJlcGxhY2UobWFya2Rvd25SZWdleCwgXCJcIik7XHJcblxyXG4gIHJldHVybiByZXN1bHRUZXh0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlVXNlclNlYXJjaChzZWFyY2hRdWVyeTogc3RyaW5nLCByb2xlOiBzdHJpbmcsIHBhZ2U6IG51bWJlcikge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IsIGlzTG9hZGluZywgbXV0YXRlIH0gPSB1c2VTV1IoXHJcbiAgICBgL2FwaS9hbGxVc2Vycy9zZWFyY2g/c2VhcmNoUXVlcnk9JHtzZWFyY2hRdWVyeX0mcGFnZT0ke3BhZ2V9JnJvbGU9JHtyb2xlfWAsXHJcbiAgICBmZXRjaGVyXHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgdXNlcnM6IGRhdGEgYXMgUmVjZWl2ZWRVc2VyRGF0YU9uQ2xpZW50W10sXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcjogZXJyb3IsXHJcbiAgICBtdXRhdGUsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvdXJzZXMoXHJcbiAgcGFnZTogbnVtYmVyLFxyXG4gIHNlYXJjaDogc3RyaW5nLFxyXG4gIHR5cGU6IFwiYWxsXCIgfCBcImVucm9sbGVkXCIgfCBcIm5vdGVucm9sbGVkXCIgfCBcInRlYWNoaW5nXCJcclxuKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBpc0xvYWRpbmcsIGVycm9yLCBtdXRhdGUgfSA9IHVzZVNXUihcclxuICAgIGAvYXBpL2NvdXJzZS9saXN0P3BhZ2U9JHtwYWdlfSZ0eXBlPSR7dHlwZX0mc2VhcmNoUXVlcnk9JHtzZWFyY2h9YCxcclxuICAgIGZldGNoZXJcclxuICApO1xyXG4gIHJldHVybiB7XHJcbiAgICBjb3Vyc2VzOiBkYXRhLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICBtdXRhdGUsXHJcbiAgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQ291cnNlUGFnZShjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciwgaXNMb2FkaW5nLCBtdXRhdGUgfSA9IHVzZVNXUihcclxuICAgIGAvYXBpL2NvdXJzZS8ke2NvdXJzZUlkfWAsXHJcbiAgICBmZXRjaGVyXHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgY291cnNlOiBkYXRhIGFzIENvdXJzZUluZm9ybWF0aW9uLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICBtdXRhdGUsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvdXJzZU1lbWJlcnMoXHJcbiAgY291cnNlSWQ6IHN0cmluZyxcclxuICBwYWdlOiBudW1iZXIsXHJcbiAgc2VhcmNoOiBzdHJpbmcsXHJcbiAgbWVtYmVyVHlwZTogXCJzdHVkZW50XCIgfCBcImZhY3VsdHlcIixcclxuICBub3RFbnJvbGxlZE9ubHkgPSBmYWxzZVxyXG4pIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yLCBpc0xvYWRpbmcsIG11dGF0ZSB9ID0gdXNlU1dSKFxyXG4gICAgYC9hcGkvY291cnNlLyR7Y291cnNlSWR9L21lbWJlcj9wYWdlPSR7cGFnZX0mbWVtYmVyVHlwZT0ke21lbWJlclR5cGV9JnNlYXJjaFF1ZXJ5PSR7c2VhcmNofSYmbm90RW5yb2xsZWRPbmx5PSR7bm90RW5yb2xsZWRPbmx5fWAsXHJcbiAgICBmZXRjaGVyXHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgbWVtYmVyczogZGF0YSBhcyBSZWNlaXZlZFVzZXJEYXRhT25DbGllbnRbXSxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgbXV0YXRlLFxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIm1kNSIsInVzZVNXUiIsInZhbGlkYXRlTG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlcnNDb2xsZWN0aW9uIiwidXNlciIsImZpbmRPbmUiLCJjb25zb2xlIiwibG9nIiwicGFzc3dvcmRIYXNoIiwibmFtZSIsImltYWdlIiwicHJvZmlsZVBpY3R1cmUiLCJnZXRSb2xlQW5kSWQiLCJyb2xlIiwiaWQiLCJfaWQiLCJjYXBpdGFsaXplRmlyc3RMZXR0ZXIiLCJzIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImZldGNoZXIiLCJhcmdzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJnZXRSb2xlQ29sb3IiLCJyb2xlQ29sb3IiLCJlZGl0VXNlciIsIm5ld1VzZXJEYXRhIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFsbG93ZWRFbnRyaWVzIiwia2V5IiwiaW5jbHVkZXMiLCJhcHBlbmQiLCJnZXQiLCJkZWxldGUiLCJoYXNPd25Qcm9wZXJ0eSIsIm1ldGhvZCIsImJvZHkiLCJmb3JtYXREYXRlVGltZSIsImRhdGUiLCJ0aW1lIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsImZvcm1hdHRlZFRpbWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJmb3JtYXR0ZWREYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZGF5IiwibW9udGgiLCJ5ZWFyIiwiZm9ybWF0dGVkRGF0ZVRpbWUiLCJlc2NhcGVNYXJrZG93biIsInRleHQiLCJtYXJrZG93blJlZ2V4IiwicmVzdWx0VGV4dCIsInVzZVVzZXJTZWFyY2giLCJzZWFyY2hRdWVyeSIsInBhZ2UiLCJkYXRhIiwiaXNMb2FkaW5nIiwibXV0YXRlIiwidXNlcnMiLCJ1c2VDb3Vyc2VzIiwic2VhcmNoIiwidHlwZSIsImNvdXJzZXMiLCJ1c2VDb3Vyc2VQYWdlIiwiY291cnNlSWQiLCJjb3Vyc2UiLCJ1c2VDb3Vyc2VNZW1iZXJzIiwibWVtYmVyVHlwZSIsIm5vdEVucm9sbGVkT25seSIsIm1lbWJlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/functions.ts\n");

/***/ }),

/***/ "(api)/./lib/types.ts":
/*!**********************!*\
  !*** ./lib/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CourseInformationProjection: () => (/* binding */ CourseInformationProjection),\n/* harmony export */   CourseListItemProjection: () => (/* binding */ CourseListItemProjection),\n/* harmony export */   userProjection: () => (/* binding */ userProjection)\n/* harmony export */ });\nconst userProjection = {\n    _id: 1,\n    name: 1,\n    phone: 1,\n    email: 1,\n    house: 1,\n    role: 1,\n    profilePicture: 1,\n    rollNumber: 1\n};\nconst CourseListItemProjection = {\n    _id: 1,\n    name: 1,\n    code: 1,\n    credits: 1\n};\nconst CourseInformationProjection = {\n    _id: 1,\n    name: 1,\n    code: 1,\n    description: 1,\n    credits: 1,\n    schedule: 1,\n    numberOfStudents: {\n        $size: \"$students\"\n    },\n    numberOfFaculties: {\n        $size: \"$faculties\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdHlwZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBZ0VPLE1BQU1BLGlCQUFpQjtJQUM1QkMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE9BQU87SUFDUEMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLE1BQU07SUFDTkMsZ0JBQWdCO0lBQ2hCQyxZQUFZO0FBQ2QsRUFBRTtBQStDSyxNQUFNQywyQkFBMkI7SUFDdENSLEtBQUs7SUFDTEMsTUFBTTtJQUNOUSxNQUFNO0lBRU5DLFNBQVM7QUFDWCxFQUFFO0FBVUssTUFBTUMsOEJBQThCO0lBQ3pDWCxLQUFLO0lBQ0xDLE1BQU07SUFDTlEsTUFBTTtJQUNORyxhQUFhO0lBQ2JGLFNBQVM7SUFDVEcsVUFBVTtJQUNWQyxrQkFBa0I7UUFDaEJDLE9BQU87SUFDVDtJQUNBQyxtQkFBbUI7UUFDakJELE9BQU87SUFDVDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9saWIvdHlwZXMudHM/MmE1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gXCJtb25nb2RiXCI7XHJcbmltcG9ydCB7IFNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCI7XHJcblxyXG5leHBvcnQgdHlwZSBSb2xlID0gXCJTdHVkZW50XCIgfCBcIkZhY3VsdHlcIiB8IFwiQWRtaW5cIjtcclxuZXhwb3J0IHR5cGUgVXNlckNvbCA9IHtcclxuICBfaWQ6IE9iamVjdElkO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICByb2xlOiBSb2xlO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmRIYXNoOiBzdHJpbmc7XHJcbiAgaG91c2U6IHN0cmluZztcclxuICBwcm9maWxlUGljdHVyZTogc3RyaW5nO1xyXG4gIHBob25lOiBzdHJpbmc7XHJcbiAgcm9sbE51bWJlcjogc3RyaW5nO1xyXG5cclxuICBjb3Vyc2VzOiBzdHJpbmdbXTsgLy8gYXJyYXkgb2YgY291cnNlIGlkc1xyXG5cclxuICBub3RpZmljYXRpb25zOiB7XHJcbiAgICBbbm90aWZpY2F0aW9uSWQ6IHN0cmluZ106IHtcclxuICAgICAgc2VlbjogYm9vbGVhbjtcclxuICAgIH07XHJcbiAgfTsgLy8gYXJyYXkgb2Ygbm90aWZpY2F0aW9uIGlkc1xyXG5cclxuICB1bnNlZW5Ob3RpZmljYXRpb25zQ291bnQ6IG51bWJlcjsgLy8gbnVtYmVyIG9mIG5vdGlmaWNhdGlvbnMgbm90IHNlZW4gYnkgdGhpcyB1c2VyXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBNeVNlc3Npb24gPSB7XHJcbiAgdXNlcjoge1xyXG4gICAgaWQ6IE9iamVjdElkO1xyXG4gICAgcm9sZTogUm9sZTtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGVtYWlsOiBzdHJpbmc7XHJcbiAgICBpbWFnZTogc3RyaW5nO1xyXG4gIH07XHJcbn0gfCBudWxsO1xyXG5cclxuZXhwb3J0IHR5cGUgUmVjZWl2ZWRVc2VyRGF0YU9uQ2xpZW50ID0gT21pdDxcclxuICBVc2VyQ29sLFxyXG4gIHwgXCJjb3Vyc2VzXCJcclxuICB8IFwibm90aWZpY2F0aW9uc1wiXHJcbiAgfCBcInNlZW5Ob3RpZmljYXRpb25zXCJcclxuICB8IFwibm90aWZpY2F0aW9uc0NvdW50XCJcclxuICB8IFwic2Vlbk5vdGlmaWNhdGlvbnNDb3VudFwiXHJcbiAgfCBcInBhc3N3b3JkSGFzaFwiXHJcbj47XHJcbmV4cG9ydCB0eXBlIFNlbnRVc2VyRGF0YUZyb21DbGllbnQgPSBPbWl0PFxyXG4gIFVzZXJDb2wsXHJcbiAgfCBcImNvdXJzZXNcIlxyXG4gIHwgXCJub3RpZmljYXRpb25zXCJcclxuICB8IFwidW5zZWVuTm90aWZpY2F0aW9uc0NvdW50XCJcclxuICB8IFwicGFzc3dvcmRIYXNoXCJcclxuICB8IFwiX2lkXCJcclxuICB8IFwicHJvZmlsZVBpY3R1cmVcIlxyXG4+ICYge1xyXG4gIHBhc3N3b3JkOiBzdHJpbmc7XHJcbiAgcHJvZmlsZVBpY3R1cmU6IEZpbGUgfCBudWxsO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgSG91c2VDb2wgPSB7XHJcbiAgX2lkOiBPYmplY3RJZDtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgcG9pbnRzOiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXNlclByb2plY3Rpb24gPSB7XHJcbiAgX2lkOiAxLFxyXG4gIG5hbWU6IDEsXHJcbiAgcGhvbmU6IDEsXHJcbiAgZW1haWw6IDEsXHJcbiAgaG91c2U6IDEsXHJcbiAgcm9sZTogMSxcclxuICBwcm9maWxlUGljdHVyZTogMSxcclxuICByb2xsTnVtYmVyOiAxLFxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQWRtaW5Ob3RpZmljYXRpb25Db2wgPSB7XHJcbiAgX2lkOiBPYmplY3RJZDtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGJvZHk6IHN0cmluZzsgLy8gc3VwcG9ydHMgbWFya2Rvd25cclxuICBkYXRlOiBEYXRlO1xyXG4gIGJhZGdlVGV4dDogc3RyaW5nOyAvLyBiYWRnZSB0ZXh0XHJcbiAgYmFkZ2VDb2xvcjogc3RyaW5nOyAvLyBiYWRnZSBjb2xvclxyXG4gIHNlZW5CeTogc3RyaW5nW107IC8vIGFycmF5IG9mIHVzZXIgaWRzLFxyXG4gIHNlZW5CeUNvdW50OiBudW1iZXI7IC8vIG51bWJlciBvZiB1c2VycyB3aG8gYXZlIHNlZW4gdGhpcyBub3RpZmljYXRpb25cclxuICBjcmVhdG9ySWQ6IE9iamVjdElkOyAvLyBpZCBvZiB0aGUgdXNlciB3aG8gY3JlYXRlZCB0aGlzIG5vdGlmaWNhdGlvblxyXG4gIGF1ZGllbmNlOiBcIlN0dWRlbnRcIiB8IFwiRmFjdWx0eVwiIHwgXCJBbGxcIjsgLy8gYXVkaWVuY2Ugb2YgdGhlIG5vdGlmaWNhdGlvblxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQWRtaW5Ob3RpZmljYXRpb25PbkNsaWVudCA9IE9taXQ8QWRtaW5Ob3RpZmljYXRpb25Db2wsIFwic2VlbkJ5XCI+ICYge1xyXG4gIHNlZW4/OiBib29sZWFuO1xyXG4gIGNyZWF0b3I6IFJlY2VpdmVkVXNlckRhdGFPbkNsaWVudDtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIERheSA9IFwiTW9uXCIgfCBcIlR1ZVwiIHwgXCJXZWRcIiB8IFwiVGh1XCIgfCBcIkZyaVwiIHwgXCJTYXRcIiB8IFwiU3VuXCI7XHJcblxyXG5leHBvcnQgdHlwZSBDb3Vyc2VDb2wgPSB7XHJcbiAgX2lkOiBPYmplY3RJZDtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgY29kZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgY3JlZGl0czogbnVtYmVyO1xyXG4gIHNjaGVkdWxlOiB7XHJcbiAgICBbZGF5IGluIERheV0/OiB7XHJcbiAgICAgIHN0YXJ0VGltZTogRGF0ZTtcclxuICAgICAgZW5kVGltZTogRGF0ZTtcclxuICAgIH1bXTtcclxuICB9O1xyXG4gIGZhY3VsdGllczogc3RyaW5nW107IC8vIGZhY3VsdHkgaWRzXHJcbiAgc3R1ZGVudHM6IHN0cmluZ1tdOyAvLyBhcnJheSBvZiBzdHVkZW50IGlkc1xyXG4gIGxlY3R1cmVzOiBzdHJpbmdbXTsgLy8gYXJyYXkgb2YgbGVjdHVyZSBpZHNcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvdXJzZUxpc3RJdGVtRGF0YSA9IHtcclxuICBfaWQ6IE9iamVjdElkO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBjb2RlOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICBjcmVkaXRzOiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgQ291cnNlTGlzdEl0ZW1Qcm9qZWN0aW9uID0ge1xyXG4gIF9pZDogMSxcclxuICBuYW1lOiAxLFxyXG4gIGNvZGU6IDEsXHJcblxyXG4gIGNyZWRpdHM6IDEsXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDb3Vyc2VJbmZvcm1hdGlvbiA9IE9taXQ8XHJcbiAgQ291cnNlQ29sLFxyXG4gIFwiZmFjdWx0aWVzXCIgfCBcInN0dWRlbnRzXCIgfCBcImxlY3R1cmVzXCJcclxuPiAmIHtcclxuICBudW1iZXJPZlN0dWRlbnRzOiBudW1iZXI7XHJcbiAgbnVtYmVyT2ZGYWN1bHRpZXM6IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VJbmZvcm1hdGlvblByb2plY3Rpb24gPSB7XHJcbiAgX2lkOiAxLFxyXG4gIG5hbWU6IDEsXHJcbiAgY29kZTogMSxcclxuICBkZXNjcmlwdGlvbjogMSxcclxuICBjcmVkaXRzOiAxLFxyXG4gIHNjaGVkdWxlOiAxLFxyXG4gIG51bWJlck9mU3R1ZGVudHM6IHtcclxuICAgICRzaXplOiBcIiRzdHVkZW50c1wiLFxyXG4gIH0sXHJcbiAgbnVtYmVyT2ZGYWN1bHRpZXM6IHtcclxuICAgICRzaXplOiBcIiRmYWN1bHRpZXNcIixcclxuICB9LFxyXG59O1xyXG5leHBvcnQgdHlwZSBUYWJzVHlwZSA9IHtcclxuICBsYWJlbDogc3RyaW5nO1xyXG4gIHZhbHVlOiBzdHJpbmc7XHJcbiAgY29sb3I6IHN0cmluZztcclxufVtdO1xyXG5cclxuZXhwb3J0IHR5cGUgQ291cnNlTm90aWZDb2wgPSB7XHJcbiAgX2lkOiBPYmplY3RJZDtcclxuICBjb3Vyc2VJZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgYm9keTogc3RyaW5nOyAvLyBzdXBwb3J0cyBtYXJrZG93blxyXG4gIGRhdGU6IERhdGU7XHJcbiAgYmFkZ2VUZXh0OiBzdHJpbmc7IC8vIGJhZGdlIHRleHRcclxuICBiYWRnZUNvbG9yOiBzdHJpbmc7IC8vIGJhZGdlIGNvbG9yXHJcbiAgY3JlYXRvcklkOiBzdHJpbmc7XHJcbiAgYXR0YWNobWVudD86IHN0cmluZzsgLy8gYXR0YWNobWVudCB1cmxcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvdXJzZU5vdGlmT25DbGllbnQgPSBPbWl0PENvdXJzZU5vdGlmQ29sLCBcImNvdXJzZUlkXCI+ICYge1xyXG4gIGNyZWF0b3I6IFJlY2VpdmVkVXNlckRhdGFPbkNsaWVudDtcclxufTtcclxuIl0sIm5hbWVzIjpbInVzZXJQcm9qZWN0aW9uIiwiX2lkIiwibmFtZSIsInBob25lIiwiZW1haWwiLCJob3VzZSIsInJvbGUiLCJwcm9maWxlUGljdHVyZSIsInJvbGxOdW1iZXIiLCJDb3Vyc2VMaXN0SXRlbVByb2plY3Rpb24iLCJjb2RlIiwiY3JlZGl0cyIsIkNvdXJzZUluZm9ybWF0aW9uUHJvamVjdGlvbiIsImRlc2NyaXB0aW9uIiwic2NoZWR1bGUiLCJudW1iZXJPZlN0dWRlbnRzIiwiJHNpemUiLCJudW1iZXJPZkZhY3VsdGllcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/types.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/functions */ \"(api)/./lib/functions.ts\");\n/* harmony import */ var _lib_DB__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/DB */ \"(api)/./lib/DB.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_functions__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_functions__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst secret = process.env.SECRET;\n\nif (!secret) {\n    throw new Error(\"Missing SECRET environment variable. Add it and restart the server\");\n}\nconst authOptions = {\n    secret: secret,\n    pages: {\n        signIn: \"/Auth/Signin\"\n    },\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Email\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"text\",\n                    placeholder: \"test@example.com\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials, req) {\n                try {\n                    console.log(credentials);\n                    const usersCollection = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\").collection(\"Users\");\n                    console.log(usersCollection);\n                    const user = await (0,_lib_functions__WEBPACK_IMPORTED_MODULE_2__.validateLogin)(credentials.email, credentials.password, usersCollection);\n                    console.log(user);\n                    if (user) {\n                        return user;\n                    } else {\n                        return null;\n                    }\n                } catch (error) {\n                    console.error(\"Error in authorize:\", error);\n                    throw new Error(\"Authorization failed\");\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async session ({ session, token, user }) {\n            try {\n                const usersCollection = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\").collection(\"Users\");\n                const { role, id } = await (0,_lib_functions__WEBPACK_IMPORTED_MODULE_2__.getRoleAndId)(session.user.email, usersCollection);\n                session.user.id = id;\n                session.user.role = role;\n                return session;\n            } catch (error) {\n                console.error(\"Error in session callback:\", error);\n                throw new Error(\"Session callback failed\");\n            }\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWlDO0FBRWlDO0FBQ0c7QUFLckUsTUFBTUksU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxNQUFNO0FBQ2U7QUFFaEQsSUFBSSxDQUFDSCxRQUFRO0lBQ1gsTUFBTSxJQUFJSyxNQUNSO0FBRUo7QUFDTyxNQUFNQyxjQUFjO0lBQ3pCTixRQUFRQTtJQUNSTyxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxXQUFXO1FBQ1RaLHNFQUFtQkEsQ0FBQztZQUNsQmEsTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUNMQyxPQUFPO29CQUNQQyxNQUFNO29CQUNOQyxhQUFhO2dCQUNmO2dCQUNBQyxVQUFVO29CQUFFSCxPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUcsV0FBVU4sV0FBZ0IsRUFBRU8sR0FBUTtnQkFDeEMsSUFBSTtvQkFDRkMsUUFBUUMsR0FBRyxDQUFDVDtvQkFDWixNQUFNVSxrQkFBa0IsQ0FBQyxNQUFNakIsa0RBQVksRUFDeENrQixFQUFFLENBQUMsY0FDSEMsVUFBVSxDQUFVO29CQUV2QkosUUFBUUMsR0FBRyxDQUFDQztvQkFDWixNQUFNRyxPQUFPLE1BQU16Qiw2REFBYUEsQ0FDOUJZLFlBQVlDLEtBQUssRUFDakJELFlBQVlLLFFBQVEsRUFDcEJLO29CQUdGRixRQUFRQyxHQUFHLENBQUNJO29CQUNaLElBQUlBLE1BQU07d0JBQ1IsT0FBT0E7b0JBQ1QsT0FBTzt3QkFDTCxPQUFPO29CQUNUO2dCQUNGLEVBQUUsT0FBT0MsT0FBTztvQkFDZE4sUUFBUU0sS0FBSyxDQUFDLHVCQUF1QkE7b0JBQ3JDLE1BQU0sSUFBSXBCLE1BQU07Z0JBQ2xCO1lBQ0Y7UUFDRjtLQUNEO0lBRURxQixXQUFXO1FBQ1QsTUFBTUMsU0FBUSxFQUNaQSxPQUFPLEVBQ1BDLEtBQUssRUFDTEosSUFBSSxFQUtMO1lBQ0MsSUFBSTtnQkFDRixNQUFNSCxrQkFBa0IsQ0FBQyxNQUFNakIsa0RBQVksRUFDeENrQixFQUFFLENBQUMsY0FDSEMsVUFBVSxDQUFVO2dCQUV2QixNQUFNLEVBQUVNLElBQUksRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTWhDLDREQUFZQSxDQUNyQzZCLFFBQVFILElBQUksQ0FBQ1osS0FBSyxFQUNsQlM7Z0JBR0ZNLFFBQVFILElBQUksQ0FBQ00sRUFBRSxHQUFHQTtnQkFDbEJILFFBQVFILElBQUksQ0FBQ0ssSUFBSSxHQUFHQTtnQkFDcEIsT0FBT0Y7WUFDVCxFQUFFLE9BQU9GLE9BQU87Z0JBQ2ROLFFBQVFNLEtBQUssQ0FBQyw4QkFBOEJBO2dCQUM1QyxNQUFNLElBQUlwQixNQUFNO1lBQ2xCO1FBQ0Y7SUFDRjtBQUNGLEVBQUU7QUFFRixpRUFBZVQsZ0RBQVFBLENBQUNVLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzJlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gXCJuZXh0LWF1dGhcIjtcclxuaW1wb3J0IEdpdGh1YlByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dpdGh1YlwiO1xyXG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xyXG5pbXBvcnQgeyBnZXRSb2xlQW5kSWQsIHZhbGlkYXRlTG9naW4gfSBmcm9tIFwiLi4vLi4vLi4vbGliL2Z1bmN0aW9uc1wiO1xyXG5cclxuaW1wb3J0IHsgbW9uZ29VcmkgfSBmcm9tIFwiLi4vLi4vLi4vbGliL0RCXCI7XHJcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcclxuaW1wb3J0IHsgVXNlckNvbCB9IGZyb20gXCIuLi8uLi8uLi9saWIvdHlwZXNcIjtcclxuY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuU0VDUkVUO1xyXG5pbXBvcnQgeyBjbGllbnRQcm9taXNlIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9EQlwiO1xyXG5cclxuaWYgKCFzZWNyZXQpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICBcIk1pc3NpbmcgU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlLiBBZGQgaXQgYW5kIHJlc3RhcnQgdGhlIHNlcnZlclwiXHJcbiAgKTtcclxufVxyXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnMgPSB7XHJcbiAgc2VjcmV0OiBzZWNyZXQsXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogXCIvQXV0aC9TaWduaW5cIixcclxuICB9LFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6IFwiRW1haWxcIixcclxuICAgICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgICBlbWFpbDoge1xyXG4gICAgICAgICAgbGFiZWw6IFwiRW1haWxcIixcclxuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwidGVzdEBleGFtcGxlLmNvbVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFsczogYW55LCByZXE6IGFueSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhjcmVkZW50aWFscyk7XHJcbiAgICAgICAgICBjb25zdCB1c2Vyc0NvbGxlY3Rpb24gPSAoYXdhaXQgY2xpZW50UHJvbWlzZSlcclxuICAgICAgICAgICAgLmRiKFwiU2Nob29sX0FwcFwiKVxyXG4gICAgICAgICAgICAuY29sbGVjdGlvbjxVc2VyQ29sPihcIlVzZXJzXCIpO1xyXG5cclxuICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJzQ29sbGVjdGlvbik7XHJcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdmFsaWRhdGVMb2dpbihcclxuICAgICAgICAgICAgY3JlZGVudGlhbHMuZW1haWwsXHJcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxyXG4gICAgICAgICAgICB1c2Vyc0NvbGxlY3Rpb25cclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlciBhcyBhbnk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGF1dGhvcml6ZTpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aG9yaXphdGlvbiBmYWlsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSksXHJcbiAgXSxcclxuXHJcbiAgY2FsbGJhY2tzOiB7XHJcbiAgICBhc3luYyBzZXNzaW9uKHtcclxuICAgICAgc2Vzc2lvbixcclxuICAgICAgdG9rZW4sXHJcbiAgICAgIHVzZXIsXHJcbiAgICB9OiB7XHJcbiAgICAgIHNlc3Npb246IGFueTtcclxuICAgICAgdG9rZW46IGFueTtcclxuICAgICAgdXNlcjogYW55O1xyXG4gICAgfSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IChhd2FpdCBjbGllbnRQcm9taXNlKVxyXG4gICAgICAgICAgLmRiKFwiU2Nob29sX0FwcFwiKVxyXG4gICAgICAgICAgLmNvbGxlY3Rpb248VXNlckNvbD4oXCJVc2Vyc1wiKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyByb2xlLCBpZCB9ID0gYXdhaXQgZ2V0Um9sZUFuZElkKFxyXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLmVtYWlsLFxyXG4gICAgICAgICAgdXNlcnNDb2xsZWN0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gaWQ7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSByb2xlO1xyXG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBzZXNzaW9uIGNhbGxiYWNrOlwiLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBjYWxsYmFjayBmYWlsZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsImdldFJvbGVBbmRJZCIsInZhbGlkYXRlTG9naW4iLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUIiwiY2xpZW50UHJvbWlzZSIsIkVycm9yIiwiYXV0aE9wdGlvbnMiLCJwYWdlcyIsInNpZ25JbiIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInJlcSIsImNvbnNvbGUiLCJsb2ciLCJ1c2Vyc0NvbGxlY3Rpb24iLCJkYiIsImNvbGxlY3Rpb24iLCJ1c2VyIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJzZXNzaW9uIiwidG9rZW4iLCJyb2xlIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/notification/index.ts":
/*!*****************************************!*\
  !*** ./pages/api/notification/index.ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/types */ \"(api)/./lib/types.ts\");\n/* harmony import */ var _lib_DB__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/DB */ \"(api)/./lib/DB.ts\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _lib_functions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/functions */ \"(api)/./lib/functions.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__, _lib_functions__WEBPACK_IMPORTED_MODULE_5__]);\n([_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__, _lib_functions__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nasync function handler(req, res) {\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n    if (!session) {\n        return res.status(403).send(\"Not logged in\");\n    }\n    if (req.method === \"POST\") {\n        return POST(req, res, session);\n    } else if (req.method === \"GET\") {\n        return GET(req, res, session);\n    } else {\n        return res.status(405).send(\"Method not allowed\");\n    }\n}\nasync function POST(req, res, session) {\n    if (session?.user.role !== \"Admin\") {\n        return res.status(403).send(\"Not an Admin\");\n    }\n    const { body: reqBody } = req;\n    const { title, body, badgeText, badgeColor, audience } = reqBody;\n    if (!title) {\n        return res.status(400).send(\"Missing body parameter: title\");\n    } else if (!body) {\n        return res.status(400).send(\"Missing body parameter: body\");\n    } else if (!badgeText) {\n        return res.status(400).send(\"Missing body parameter: badgeText\");\n    } else if (!badgeColor) {\n        return res.status(400).send(\"Missing body parameter: badgeColor\");\n    } else if (!audience || audience !== \"All\" && audience !== \"Student\" && audience !== \"Faculty\") {\n        return res.status(400).send(\"Missing body parameter: audience or invalid audience type, must be All, Student, or Faculty\");\n    }\n    const notifID = new mongodb__WEBPACK_IMPORTED_MODULE_4__.ObjectId();\n    const notificationDoc = {\n        _id: notifID,\n        title,\n        body,\n        badgeText,\n        badgeColor,\n        audience,\n        creatorId: session.user.id,\n        seenBy: [],\n        date: new Date(),\n        seenByCount: 0\n    };\n    const db = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\");\n    const notificationCollection = db.collection(\"AdminNotifications\");\n    const insertResponse = await notificationCollection.insertOne(notificationDoc);\n    const usersCollection = db.collection(\"Users\");\n    let filter; // Add your filter criteria here if needed\n    if (audience === \"All\") {\n        filter = {};\n    } else {\n        filter = {\n            role: {\n                $in: [\n                    audience,\n                    \"Admin\"\n                ]\n            }\n        };\n    }\n    const update = {\n        $set: {\n            [`notifications.${[\n                notifID.toString()\n            ]}`]: {\n                seen: false\n            }\n        },\n        $inc: {\n            unseenNotificationsCount: 1\n        }\n    }; // Replace 'myArrayField' with your field name\n    const options = {\n        upsert: true\n    };\n    const updateResponse = await usersCollection.updateMany(filter, update, options);\n    if (!insertResponse.acknowledged) {\n        return res.status(500).json(\"Notification creation failed\");\n    } else if (!updateResponse.acknowledged) {\n        return res.status(500).json(\"users collection update failed, notification created but not sent to users\");\n    }\n    return res.status(200).json(\"Notification created successfully\");\n}\nasync function GET(req, res, session) {\n    const maxResults = req.query.maxResults ? parseInt(req.query.maxResults) : 10;\n    const page = req.query.page ? parseInt(req.query.page) : 1;\n    const skip = (page - 1) * maxResults;\n    const unseenOnly = req.query.unseenOnly === \"true\" ? true : false;\n    const db = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\");\n    const notificationCollection = db.collection(\"AdminNotifications\");\n    const usersCollection = db.collection(\"Users\");\n    const userId = new mongodb__WEBPACK_IMPORTED_MODULE_4__.ObjectId(session?.user.id);\n    let userNotifDoc = (await usersCollection.findOne({\n        _id: userId\n    }, {\n        projection: {\n            notifications: 1\n        }\n    }))?.notifications;\n    if (!userNotifDoc) {\n        return res.json([]);\n    }\n    if (unseenOnly) {\n        userNotifDoc = Object.fromEntries(Object.entries(userNotifDoc).filter(([key, value])=>!value.seen));\n    }\n    // reverse the object\n    userNotifDoc = Object.fromEntries(Object.entries(userNotifDoc).reverse());\n    // slice the object\n    userNotifDoc = Object.fromEntries(Object.entries(userNotifDoc).slice(skip, skip + maxResults));\n    const userNotifIds = Object.keys(userNotifDoc).map((key)=>new mongodb__WEBPACK_IMPORTED_MODULE_4__.ObjectId(key));\n    let notifProjection = {\n        _id: 1,\n        title: 1,\n        body: {\n            $concat: [\n                {\n                    $substr: [\n                        \"$body\",\n                        0,\n                        150\n                    ]\n                },\n                \"...\"\n            ]\n        },\n        badgeText: 1,\n        badgeColor: 1,\n        audience: 1,\n        creatorId: 1,\n        date: 1,\n        creator: 1\n    };\n    if (session?.user.role === \"Admin\") {\n        notifProjection = {\n            ...notifProjection,\n            seenByCount: 1\n        };\n    }\n    let notifications;\n    notifications = await notificationCollection.aggregate([\n        {\n            $match: {\n                _id: {\n                    $in: userNotifIds\n                }\n            }\n        },\n        {\n            $lookup: {\n                from: \"Users\",\n                localField: \"creatorId\",\n                foreignField: \"_id\",\n                as: \"creator\",\n                pipeline: [\n                    {\n                        $project: _lib_types__WEBPACK_IMPORTED_MODULE_2__.userProjection\n                    },\n                    {\n                        $limit: 1\n                    }\n                ]\n            }\n        },\n        {\n            $addFields: {\n                creator: {\n                    $arrayElemAt: [\n                        \"$creator\",\n                        0\n                    ]\n                }\n            }\n        },\n        {\n            $project: notifProjection\n        }\n    ]).toArray();\n    const notificationsWithSeen = notifications.map((notification)=>{\n        notification.body = (0,_lib_functions__WEBPACK_IMPORTED_MODULE_5__.escapeMarkdown)(notification.body);\n        let seen = false;\n        if (userNotifDoc.hasOwnProperty(notification._id.toString())) {\n            seen = userNotifDoc[notification._id.toString()].seen;\n        }\n        return {\n            ...notification,\n            seen\n        };\n    }).sort((a, b)=>b.date.getTime() - a.date.getTime());\n    return res.status(200).json(notificationsWithSeen);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDUjt3QkFDRUMsVUFBVW5GLHNEQUFjQTtvQkFDMUI7b0JBQ0E7d0JBQ0VvRixRQUFRO29CQUNWO2lCQUNEO1lBQ0g7UUFDRjtRQUNBO1lBQ0VDLFlBQVk7Z0JBQ1ZYLFNBQVM7b0JBQUVZLGNBQWM7d0JBQUM7d0JBQVk7cUJBQUU7Z0JBQUM7WUFDM0M7UUFDRjtRQUNBO1lBQ0VILFVBQVVaO1FBQ1o7S0FDRCxFQUVBZ0IsT0FBTztJQUVWLE1BQU1DLHdCQUFxRDVCLGNBQ3hEVSxHQUFHLENBQUMsQ0FBQ21CO1FBQ0pBLGFBQWExRSxJQUFJLEdBQUdaLDhEQUFjQSxDQUFDc0YsYUFBYTFFLElBQUk7UUFDcEQsSUFBSTBCLE9BQU87UUFDWCxJQUFJZ0IsYUFBYWlDLGNBQWMsQ0FBQ0QsYUFBYWxFLEdBQUcsQ0FBQ2lCLFFBQVEsS0FBSztZQUM1REMsT0FBT2dCLFlBQVksQ0FBQ2dDLGFBQWFsRSxHQUFHLENBQUNpQixRQUFRLEdBQUcsQ0FBQ0MsSUFBSTtRQUN2RDtRQUNBLE9BQU87WUFBRSxHQUFHZ0QsWUFBWTtZQUFFaEQ7UUFBSztJQUNqQyxHQUNDa0QsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUVsRSxJQUFJLENBQUNtRSxPQUFPLEtBQUtGLEVBQUVqRSxJQUFJLENBQUNtRSxPQUFPO0lBRW5ELE9BQU94RixJQUFJRSxNQUFNLENBQUMsS0FBS3lDLElBQUksQ0FBQ3VDO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vcGFnZXMvYXBpL25vdGlmaWNhdGlvbi9pbmRleC50cz84NzVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xyXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xyXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gXCIuLi9hdXRoL1suLi5uZXh0YXV0aF1cIjtcclxuaW1wb3J0IHtcclxuICBBZG1pbk5vdGlmaWNhdGlvbkNvbCxcclxuICBBZG1pbk5vdGlmaWNhdGlvbk9uQ2xpZW50LFxyXG4gIE15U2Vzc2lvbixcclxuICBVc2VyQ29sLFxyXG4gIHVzZXJQcm9qZWN0aW9uLFxyXG59IGZyb20gXCJAL2xpYi90eXBlc1wiO1xyXG5pbXBvcnQgeyBjbGllbnRQcm9taXNlIH0gZnJvbSBcIkAvbGliL0RCXCI7XHJcbmltcG9ydCB7IE9iamVjdElkLCBVcGRhdGVGaWx0ZXIgfSBmcm9tIFwibW9uZ29kYlwiO1xyXG5pbXBvcnQgeyBlc2NhcGVNYXJrZG93biB9IGZyb20gXCJAL2xpYi9mdW5jdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXHJcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZVxyXG4pIHtcclxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcywgYXV0aE9wdGlvbnMpO1xyXG5cclxuICBpZiAoIXNlc3Npb24pIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZChcIk5vdCBsb2dnZWQgaW5cIik7XHJcbiAgfVxyXG4gIGlmIChyZXEubWV0aG9kID09PSBcIlBPU1RcIikge1xyXG4gICAgcmV0dXJuIFBPU1QocmVxLCByZXMsIHNlc3Npb24pO1xyXG4gIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gXCJHRVRcIikge1xyXG4gICAgcmV0dXJuIEdFVChyZXEsIHJlcywgc2Vzc2lvbik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuc2VuZChcIk1ldGhvZCBub3QgYWxsb3dlZFwiKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIFBPU1QoXHJcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZSxcclxuICBzZXNzaW9uOiBNeVNlc3Npb25cclxuKSB7XHJcbiAgaWYgKHNlc3Npb24/LnVzZXIucm9sZSAhPT0gXCJBZG1pblwiKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLnNlbmQoXCJOb3QgYW4gQWRtaW5cIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IGJvZHk6IHJlcUJvZHkgfSA9IHJlcTtcclxuXHJcbiAgY29uc3QgeyB0aXRsZSwgYm9keSwgYmFkZ2VUZXh0LCBiYWRnZUNvbG9yLCBhdWRpZW5jZSB9ID0gcmVxQm9keTtcclxuICBpZiAoIXRpdGxlKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJNaXNzaW5nIGJvZHkgcGFyYW1ldGVyOiB0aXRsZVwiKTtcclxuICB9IGVsc2UgaWYgKCFib2R5KSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJNaXNzaW5nIGJvZHkgcGFyYW1ldGVyOiBib2R5XCIpO1xyXG4gIH0gZWxzZSBpZiAoIWJhZGdlVGV4dCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiTWlzc2luZyBib2R5IHBhcmFtZXRlcjogYmFkZ2VUZXh0XCIpO1xyXG4gIH0gZWxzZSBpZiAoIWJhZGdlQ29sb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChcIk1pc3NpbmcgYm9keSBwYXJhbWV0ZXI6IGJhZGdlQ29sb3JcIik7XHJcbiAgfSBlbHNlIGlmIChcclxuICAgICFhdWRpZW5jZSB8fFxyXG4gICAgKGF1ZGllbmNlICE9PSBcIkFsbFwiICYmIGF1ZGllbmNlICE9PSBcIlN0dWRlbnRcIiAmJiBhdWRpZW5jZSAhPT0gXCJGYWN1bHR5XCIpXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gcmVzXHJcbiAgICAgIC5zdGF0dXMoNDAwKVxyXG4gICAgICAuc2VuZChcclxuICAgICAgICBcIk1pc3NpbmcgYm9keSBwYXJhbWV0ZXI6IGF1ZGllbmNlIG9yIGludmFsaWQgYXVkaWVuY2UgdHlwZSwgbXVzdCBiZSBBbGwsIFN0dWRlbnQsIG9yIEZhY3VsdHlcIlxyXG4gICAgICApO1xyXG4gIH1cclxuICBjb25zdCBub3RpZklEID0gbmV3IE9iamVjdElkKCk7XHJcbiAgY29uc3Qgbm90aWZpY2F0aW9uRG9jID0ge1xyXG4gICAgX2lkOiBub3RpZklELFxyXG4gICAgdGl0bGUsXHJcbiAgICBib2R5LFxyXG4gICAgYmFkZ2VUZXh0LFxyXG4gICAgYmFkZ2VDb2xvcixcclxuICAgIGF1ZGllbmNlLFxyXG4gICAgY3JlYXRvcklkOiBzZXNzaW9uLnVzZXIuaWQsXHJcbiAgICBzZWVuQnk6IFtdLFxyXG4gICAgZGF0ZTogbmV3IERhdGUoKSxcclxuICAgIHNlZW5CeUNvdW50OiAwLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRiID0gKGF3YWl0IGNsaWVudFByb21pc2UpLmRiKFwiU2Nob29sX0FwcFwiKTtcclxuICBjb25zdCBub3RpZmljYXRpb25Db2xsZWN0aW9uID1cclxuICAgIGRiLmNvbGxlY3Rpb248QWRtaW5Ob3RpZmljYXRpb25Db2w+KFwiQWRtaW5Ob3RpZmljYXRpb25zXCIpO1xyXG5cclxuICBjb25zdCBpbnNlcnRSZXNwb25zZSA9IGF3YWl0IG5vdGlmaWNhdGlvbkNvbGxlY3Rpb24uaW5zZXJ0T25lKFxyXG4gICAgbm90aWZpY2F0aW9uRG9jXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgdXNlcnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxVc2VyQ29sPihcIlVzZXJzXCIpO1xyXG4gIGxldCBmaWx0ZXI7IC8vIEFkZCB5b3VyIGZpbHRlciBjcml0ZXJpYSBoZXJlIGlmIG5lZWRlZFxyXG4gIGlmIChhdWRpZW5jZSA9PT0gXCJBbGxcIikge1xyXG4gICAgZmlsdGVyID0ge307XHJcbiAgfSBlbHNlIHtcclxuICAgIGZpbHRlciA9IHsgcm9sZTogeyAkaW46IFthdWRpZW5jZSwgXCJBZG1pblwiXSB9IH07XHJcbiAgfVxyXG5cclxuICBjb25zdCB1cGRhdGUgPSB7XHJcbiAgICAkc2V0OiB7XHJcbiAgICAgIFtgbm90aWZpY2F0aW9ucy4ke1tub3RpZklELnRvU3RyaW5nKCldfWBdOiB7XHJcbiAgICAgICAgc2VlbjogZmFsc2UsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgICRpbmM6IHsgdW5zZWVuTm90aWZpY2F0aW9uc0NvdW50OiAxIH0sXHJcbiAgfSBhcyBVcGRhdGVGaWx0ZXI8VXNlckNvbD5bXCJub3RpZmljYXRpb25zXCJdOyAvLyBSZXBsYWNlICdteUFycmF5RmllbGQnIHdpdGggeW91ciBmaWVsZCBuYW1lXHJcblxyXG4gIGNvbnN0IG9wdGlvbnMgPSB7IHVwc2VydDogdHJ1ZSB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVSZXNwb25zZSA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi51cGRhdGVNYW55KFxyXG4gICAgZmlsdGVyLFxyXG4gICAgdXBkYXRlLFxyXG4gICAgb3B0aW9uc1xyXG4gICk7XHJcblxyXG4gIGlmICghaW5zZXJ0UmVzcG9uc2UuYWNrbm93bGVkZ2VkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oXCJOb3RpZmljYXRpb24gY3JlYXRpb24gZmFpbGVkXCIpO1xyXG4gIH0gZWxzZSBpZiAoIXVwZGF0ZVJlc3BvbnNlLmFja25vd2xlZGdlZCkge1xyXG4gICAgcmV0dXJuIHJlc1xyXG4gICAgICAuc3RhdHVzKDUwMClcclxuICAgICAgLmpzb24oXHJcbiAgICAgICAgXCJ1c2VycyBjb2xsZWN0aW9uIHVwZGF0ZSBmYWlsZWQsIG5vdGlmaWNhdGlvbiBjcmVhdGVkIGJ1dCBub3Qgc2VudCB0byB1c2Vyc1wiXHJcbiAgICAgICk7XHJcbiAgfVxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihcIk5vdGlmaWNhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gR0VUKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2UsXHJcbiAgc2Vzc2lvbjogTXlTZXNzaW9uXHJcbikge1xyXG4gIGNvbnN0IG1heFJlc3VsdHMgPSAocmVxLnF1ZXJ5Lm1heFJlc3VsdHMgYXMgc3RyaW5nKVxyXG4gICAgPyBwYXJzZUludChyZXEucXVlcnkubWF4UmVzdWx0cyBhcyBzdHJpbmcpXHJcbiAgICA6IDEwO1xyXG4gIGNvbnN0IHBhZ2UgPSAocmVxLnF1ZXJ5LnBhZ2UgYXMgc3RyaW5nKVxyXG4gICAgPyBwYXJzZUludChyZXEucXVlcnkucGFnZSBhcyBzdHJpbmcpXHJcbiAgICA6IDE7XHJcbiAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBtYXhSZXN1bHRzO1xyXG4gIGNvbnN0IHVuc2Vlbk9ubHkgPSByZXEucXVlcnkudW5zZWVuT25seSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gIGNvbnN0IGRiID0gKGF3YWl0IGNsaWVudFByb21pc2UpLmRiKFwiU2Nob29sX0FwcFwiKTtcclxuICBjb25zdCBub3RpZmljYXRpb25Db2xsZWN0aW9uID1cclxuICAgIGRiLmNvbGxlY3Rpb248QWRtaW5Ob3RpZmljYXRpb25Db2w+KFwiQWRtaW5Ob3RpZmljYXRpb25zXCIpO1xyXG4gIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb248VXNlckNvbD4oXCJVc2Vyc1wiKTtcclxuICBjb25zdCB1c2VySWQgPSBuZXcgT2JqZWN0SWQoc2Vzc2lvbj8udXNlci5pZCk7XHJcbiAgbGV0IHVzZXJOb3RpZkRvYyA9IChcclxuICAgIGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5maW5kT25lKFxyXG4gICAgICB7IF9pZDogdXNlcklkIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBwcm9qZWN0aW9uOiB7XHJcbiAgICAgICAgICBub3RpZmljYXRpb25zOiAxLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIClcclxuICApPy5ub3RpZmljYXRpb25zITtcclxuXHJcbiAgaWYgKCF1c2VyTm90aWZEb2MpIHtcclxuICAgIHJldHVybiByZXMuanNvbihbXSk7XHJcbiAgfVxyXG4gIGlmICh1bnNlZW5Pbmx5KSB7XHJcbiAgICB1c2VyTm90aWZEb2MgPSBPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKHVzZXJOb3RpZkRvYykuZmlsdGVyKChba2V5LCB2YWx1ZV0pID0+ICF2YWx1ZS5zZWVuKVxyXG4gICAgKTtcclxuICB9XHJcbiAgLy8gcmV2ZXJzZSB0aGUgb2JqZWN0XHJcbiAgdXNlck5vdGlmRG9jID0gT2JqZWN0LmZyb21FbnRyaWVzKFxyXG4gICAgT2JqZWN0LmVudHJpZXModXNlck5vdGlmRG9jKS5yZXZlcnNlKCkgYXMgYW55XHJcbiAgKTtcclxuXHJcbiAgLy8gc2xpY2UgdGhlIG9iamVjdFxyXG4gIHVzZXJOb3RpZkRvYyA9IE9iamVjdC5mcm9tRW50cmllcyhcclxuICAgIE9iamVjdC5lbnRyaWVzKHVzZXJOb3RpZkRvYykuc2xpY2Uoc2tpcCwgc2tpcCArIG1heFJlc3VsdHMpXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgdXNlck5vdGlmSWRzID0gT2JqZWN0LmtleXModXNlck5vdGlmRG9jKS5tYXAoXHJcbiAgICAoa2V5KSA9PiBuZXcgT2JqZWN0SWQoa2V5KVxyXG4gICk7XHJcblxyXG4gIGxldCBub3RpZlByb2plY3Rpb246IGFueSA9IHtcclxuICAgIF9pZDogMSxcclxuICAgIHRpdGxlOiAxLFxyXG4gICAgYm9keToge1xyXG4gICAgICAkY29uY2F0OiBbXHJcbiAgICAgICAgeyAkc3Vic3RyOiBbXCIkYm9keVwiLCAwLCAxNTBdIH0sIC8vIFNwZWNpZnkgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIGtlZXAgKGUuZy4sIDEwKVxyXG4gICAgICAgIFwiLi4uXCIsIC8vIEFkZCBlbGxpcHNpcyBvciBhbnkgZGVzaXJlZCB0cnVuY2F0aW9uIGluZGljYXRvclxyXG4gICAgICBdLFxyXG4gICAgfSxcclxuICAgIGJhZGdlVGV4dDogMSxcclxuICAgIGJhZGdlQ29sb3I6IDEsXHJcbiAgICBhdWRpZW5jZTogMSxcclxuICAgIGNyZWF0b3JJZDogMSxcclxuICAgIGRhdGU6IDEsXHJcbiAgICBjcmVhdG9yOiAxLFxyXG4gIH07XHJcbiAgaWYgKHNlc3Npb24/LnVzZXIucm9sZSA9PT0gXCJBZG1pblwiKSB7XHJcbiAgICBub3RpZlByb2plY3Rpb24gPSB7XHJcbiAgICAgIC4uLm5vdGlmUHJvamVjdGlvbixcclxuICAgICAgc2VlbkJ5Q291bnQ6IDEsXHJcbiAgICB9O1xyXG4gIH1cclxuICBsZXQgbm90aWZpY2F0aW9ucztcclxuXHJcbiAgbm90aWZpY2F0aW9ucyA9IGF3YWl0IG5vdGlmaWNhdGlvbkNvbGxlY3Rpb25cclxuICAgIC5hZ2dyZWdhdGUoW1xyXG4gICAgICB7XHJcbiAgICAgICAgJG1hdGNoOiB7IF9pZDogeyAkaW46IHVzZXJOb3RpZklkcyB9IH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAkbG9va3VwOiB7XHJcbiAgICAgICAgICBmcm9tOiBcIlVzZXJzXCIsXHJcbiAgICAgICAgICBsb2NhbEZpZWxkOiBcImNyZWF0b3JJZFwiLFxyXG4gICAgICAgICAgZm9yZWlnbkZpZWxkOiBcIl9pZFwiLFxyXG4gICAgICAgICAgYXM6IFwiY3JlYXRvclwiLFxyXG4gICAgICAgICAgcGlwZWxpbmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICRwcm9qZWN0OiB1c2VyUHJvamVjdGlvbixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICRsaW1pdDogMSwgLy8gTGltaXQgdGhlIG51bWJlciBvZiBjcmVhdG9ycyB0byAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAkYWRkRmllbGRzOiB7XHJcbiAgICAgICAgICBjcmVhdG9yOiB7ICRhcnJheUVsZW1BdDogW1wiJGNyZWF0b3JcIiwgMF0gfSwgLy8gR2V0IHRoZSBmaXJzdCBjcmVhdG9yIGZyb20gdGhlICdjcmVhdG9ycycgYXJyYXlcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgJHByb2plY3Q6IG5vdGlmUHJvamVjdGlvbixcclxuICAgICAgfSxcclxuICAgIF0pXHJcblxyXG4gICAgLnRvQXJyYXkoKTtcclxuXHJcbiAgY29uc3Qgbm90aWZpY2F0aW9uc1dpdGhTZWVuOiBBZG1pbk5vdGlmaWNhdGlvbk9uQ2xpZW50W10gPSBub3RpZmljYXRpb25zXHJcbiAgICAubWFwKChub3RpZmljYXRpb24pID0+IHtcclxuICAgICAgbm90aWZpY2F0aW9uLmJvZHkgPSBlc2NhcGVNYXJrZG93bihub3RpZmljYXRpb24uYm9keSk7XHJcbiAgICAgIGxldCBzZWVuID0gZmFsc2U7XHJcbiAgICAgIGlmICh1c2VyTm90aWZEb2MuaGFzT3duUHJvcGVydHkobm90aWZpY2F0aW9uLl9pZC50b1N0cmluZygpKSkge1xyXG4gICAgICAgIHNlZW4gPSB1c2VyTm90aWZEb2Nbbm90aWZpY2F0aW9uLl9pZC50b1N0cmluZygpXS5zZWVuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IC4uLm5vdGlmaWNhdGlvbiwgc2VlbiB9IGFzIEFkbWluTm90aWZpY2F0aW9uT25DbGllbnQ7XHJcbiAgICB9KVxyXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuZGF0ZS5nZXRUaW1lKCkgLSBhLmRhdGUuZ2V0VGltZSgpKTtcclxuXHJcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKG5vdGlmaWNhdGlvbnNXaXRoU2Vlbik7XHJcbn1cclxuIl0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsInVzZXJQcm9qZWN0aW9uIiwiY2xpZW50UHJvbWlzZSIsIk9iamVjdElkIiwiZXNjYXBlTWFya2Rvd24iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsInN0YXR1cyIsInNlbmQiLCJtZXRob2QiLCJQT1NUIiwiR0VUIiwidXNlciIsInJvbGUiLCJib2R5IiwicmVxQm9keSIsInRpdGxlIiwiYmFkZ2VUZXh0IiwiYmFkZ2VDb2xvciIsImF1ZGllbmNlIiwibm90aWZJRCIsIm5vdGlmaWNhdGlvbkRvYyIsIl9pZCIsImNyZWF0b3JJZCIsImlkIiwic2VlbkJ5IiwiZGF0ZSIsIkRhdGUiLCJzZWVuQnlDb3VudCIsImRiIiwibm90aWZpY2F0aW9uQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJpbnNlcnRSZXNwb25zZSIsImluc2VydE9uZSIsInVzZXJzQ29sbGVjdGlvbiIsImZpbHRlciIsIiRpbiIsInVwZGF0ZSIsIiRzZXQiLCJ0b1N0cmluZyIsInNlZW4iLCIkaW5jIiwidW5zZWVuTm90aWZpY2F0aW9uc0NvdW50Iiwib3B0aW9ucyIsInVwc2VydCIsInVwZGF0ZVJlc3BvbnNlIiwidXBkYXRlTWFueSIsImFja25vd2xlZGdlZCIsImpzb24iLCJtYXhSZXN1bHRzIiwicXVlcnkiLCJwYXJzZUludCIsInBhZ2UiLCJza2lwIiwidW5zZWVuT25seSIsInVzZXJJZCIsInVzZXJOb3RpZkRvYyIsImZpbmRPbmUiLCJwcm9qZWN0aW9uIiwibm90aWZpY2F0aW9ucyIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImtleSIsInZhbHVlIiwicmV2ZXJzZSIsInNsaWNlIiwidXNlck5vdGlmSWRzIiwia2V5cyIsIm1hcCIsIm5vdGlmUHJvamVjdGlvbiIsIiRjb25jYXQiLCIkc3Vic3RyIiwiY3JlYXRvciIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRsb29rdXAiLCJmcm9tIiwibG9jYWxGaWVsZCIsImZvcmVpZ25GaWVsZCIsImFzIiwicGlwZWxpbmUiLCIkcHJvamVjdCIsIiRsaW1pdCIsIiRhZGRGaWVsZHMiLCIkYXJyYXlFbGVtQXQiLCJ0b0FycmF5Iiwibm90aWZpY2F0aW9uc1dpdGhTZWVuIiwibm90aWZpY2F0aW9uIiwiaGFzT3duUHJvcGVydHkiLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/notification/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotification&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cnotification%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();