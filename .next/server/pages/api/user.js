"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user";
exports.ids = ["pages/api/user"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "md5":
/*!**********************!*\
  !*** external "md5" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("md5");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "swr":
/*!**********************!*\
  !*** external "swr" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("swr");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\index.ts */ \"(api)/./pages/api/user/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_user_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_user_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user\",\n        pathname: \"/api/user\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_user_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXImcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3VzZXIlNUNpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMscURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHFEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8/OTk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVzZXJcXFxcaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/DB.ts":
/*!*******************!*\
  !*** ./lib/DB.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientPromise: () => (/* binding */ clientPromise),\n/* harmony export */   mongoUri: () => (/* binding */ mongoUri)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst mongoUri = process.env.MONGO_URI;\nif (!mongoUri) {\n    throw new Error(\"Please define the MONGO_URI environment variable inside .env\");\n}\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    //@ts-ignore\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(mongoUri);\n        //@ts-ignore\n        global._mongoClientPromise = client.connect();\n    }\n    //@ts-ignore\n    clientPromise = global._mongoClientPromise;\n} else {}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvREIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzQztBQUUvQixNQUFNQyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLFNBQVMsQ0FBQztBQUU5QyxJQUFJLENBQUNILFVBQVU7SUFDYixNQUFNLElBQUlJLE1BQ1I7QUFFSjtBQUVBLElBQUlDO0FBQ0osSUFBSUM7QUFFSixJQUFJTCxJQUFzQyxFQUFFO0lBQzFDLCtEQUErRDtJQUMvRCw2RUFBNkU7SUFDN0UsWUFBWTtJQUNaLElBQUksQ0FBQ00sT0FBT0MsbUJBQW1CLEVBQUU7UUFDL0JILFNBQVMsSUFBSU4sZ0RBQVdBLENBQUNDO1FBQ3pCLFlBQVk7UUFDWk8sT0FBT0MsbUJBQW1CLEdBQUdILE9BQU9JLE9BQU87SUFDN0M7SUFDQSxZQUFZO0lBQ1pILGdCQUFnQkMsT0FBT0MsbUJBQW1CO0FBQzVDLE9BQU8sRUFJTjtBQUV3QiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL2xpYi9EQi50cz8wM2ZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBtb25nb1VyaSA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSSTtcclxuXHJcbmlmICghbW9uZ29VcmkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICBcIlBsZWFzZSBkZWZpbmUgdGhlIE1PTkdPX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudlwiXHJcbiAgKTtcclxufVxyXG5cclxubGV0IGNsaWVudDtcclxubGV0IGNsaWVudFByb21pc2U6IFByb21pc2U8TW9uZ29DbGllbnQ+O1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcclxuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcclxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxyXG4gIC8vQHRzLWlnbm9yZVxyXG4gIGlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChtb25nb1VyaSk7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcclxuICB9XHJcbiAgLy9AdHMtaWdub3JlXHJcbiAgY2xpZW50UHJvbWlzZSA9IGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlO1xyXG59IGVsc2Uge1xyXG4gIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXHJcbiAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KG1vbmdvVXJpKTtcclxuICBjbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcclxufVxyXG5cclxuZXhwb3J0IHsgY2xpZW50UHJvbWlzZSB9O1xyXG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJtb25nb1VyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJFcnJvciIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/DB.ts\n");

/***/ }),

/***/ "(api)/./lib/functions.ts":
/*!**************************!*\
  !*** ./lib/functions.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   capitalizeFirstLetter: () => (/* binding */ capitalizeFirstLetter),\n/* harmony export */   editUser: () => (/* binding */ editUser),\n/* harmony export */   escapeMarkdown: () => (/* binding */ escapeMarkdown),\n/* harmony export */   fetcher: () => (/* binding */ fetcher),\n/* harmony export */   formatDateTime: () => (/* binding */ formatDateTime),\n/* harmony export */   getRoleAndId: () => (/* binding */ getRoleAndId),\n/* harmony export */   getRoleColor: () => (/* binding */ getRoleColor),\n/* harmony export */   useCourseMembers: () => (/* binding */ useCourseMembers),\n/* harmony export */   useCoursePage: () => (/* binding */ useCoursePage),\n/* harmony export */   useCourses: () => (/* binding */ useCourses),\n/* harmony export */   useUserSearch: () => (/* binding */ useUserSearch),\n/* harmony export */   validateLogin: () => (/* binding */ validateLogin)\n/* harmony export */ });\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ \"swr\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([swr__WEBPACK_IMPORTED_MODULE_1__]);\nswr__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function validateLogin(email, password, usersCollection) {\n    const user = await usersCollection.findOne({\n        email: email\n    });\n    console.log(user);\n    const passwordHash = md5__WEBPACK_IMPORTED_MODULE_0___default()(password);\n    if (!user) {\n        return null;\n    }\n    if (user.passwordHash !== passwordHash) {\n        return null;\n    }\n    return {\n        email: user.email,\n        name: user.name,\n        image: user.profilePicture\n    };\n}\nasync function getRoleAndId(email, usersCollection) {\n    const user = await usersCollection.findOne({\n        email: email\n    });\n    const role = user?.role;\n    const id = user?._id;\n    return {\n        role,\n        id\n    };\n}\nfunction capitalizeFirstLetter(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n// @ts-ignore\nconst fetcher = (...args)=>// @ts-ignore\n    fetch(...args).then((res)=>res.json()).catch((err)=>console.error(err));\nfunction getRoleColor(role) {\n    let roleColor = \"gray\";\n    if (role === \"Student\") {\n        roleColor = \"blue\";\n    } else if (role === \"Admin\" || role === \"All\") {\n        roleColor = \"red\";\n    } else if (role === \"Faculty\") {\n        roleColor = \"green\";\n    }\n    return roleColor;\n}\nasync function editUser(newUserData) {\n    const formData = new FormData();\n    //allowed entries are name, profile picture, phone and password only:\n    const allowedEntries = [\n        \"name\",\n        \"phone\",\n        \"password\",\n        \"profilePicture\",\n        \"userId\",\n        \"oldPicture\"\n    ];\n    // the key should only consider those entries which are not empty and allowed\n    for(let key in newUserData){\n        if (allowedEntries.includes(key) && newUserData[key]) {\n            // @ts-ignore\n            formData.append(key, newUserData[key]);\n        }\n    }\n    if (!formData.get(\"profilePicture\")) {\n        formData.delete(\"oldPicture\");\n    }\n    if (newUserData.hasOwnProperty(\"_id\")) {\n        formData.append(\"userId\", newUserData._id);\n    }\n    const res = await fetch(\"/api/user\", {\n        method: \"PUT\",\n        body: formData\n    });\n    return res;\n}\nfunction formatDateTime(date) {\n    const time = date.toLocaleTimeString([], {\n        hour: \"numeric\",\n        minute: \"2-digit\"\n    });\n    const formattedTime = time.toLowerCase().replace(/\\s/g, \"\");\n    const formattedDate = date.toLocaleDateString([\n        \"en-GB\"\n    ], {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\"\n    });\n    const formattedDateTime = `${formattedTime} • ${formattedDate}`;\n    return formattedDateTime;\n}\nfunction escapeMarkdown(text) {\n    const markdownRegex = /[#\\][*_~`!@#$%^&*()\"']/g;\n    // Replace all matched markdown elements with an empty string\n    const resultText = text.replace(markdownRegex, \"\");\n    return resultText;\n}\nfunction useUserSearch(searchQuery, role, page) {\n    const { data, error, isLoading, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/allUsers/search?searchQuery=${searchQuery}&page=${page}&role=${role}`, fetcher);\n    return {\n        users: data,\n        isLoading,\n        error: error,\n        mutate\n    };\n}\nfunction useCourses(page, search, type) {\n    const { data, isLoading, error, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/course/list?page=${page}&type=${type}&searchQuery=${search}`, fetcher);\n    return {\n        courses: data,\n        isLoading,\n        error,\n        mutate\n    };\n}\nfunction useCoursePage(courseId) {\n    const { data, error, isLoading, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/course/${courseId}`, fetcher);\n    return {\n        course: data,\n        isLoading,\n        error,\n        mutate\n    };\n}\nfunction useCourseMembers(courseId, page, search, memberType, notEnrolledOnly = false) {\n    const { data, error, isLoading, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/course/${courseId}/member?page=${page}&memberType=${memberType}&searchQuery=${search}&&notEnrolledOnly=${notEnrolledOnly}`, fetcher);\n    return {\n        members: data,\n        isLoading,\n        error,\n        mutate\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZnVuY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFzQjtBQUNHO0FBRWxCLGVBQWVFLGNBQ3BCQyxLQUFhLEVBQ2JDLFFBQWdCLEVBQ2hCQyxlQUFvQztJQUVwQyxNQUFNQyxPQUFPLE1BQU1ELGdCQUFnQkUsT0FBTyxDQUFDO1FBQUVKLE9BQU9BO0lBQU07SUFDMURLLFFBQVFDLEdBQUcsQ0FBQ0g7SUFFWixNQUFNSSxlQUFlViwwQ0FBR0EsQ0FBQ0k7SUFDekIsSUFBSSxDQUFDRSxNQUFNO1FBQ1QsT0FBTztJQUNUO0lBQ0EsSUFBSUEsS0FBS0ksWUFBWSxLQUFLQSxjQUFjO1FBQ3RDLE9BQU87SUFDVDtJQUVBLE9BQU87UUFDTFAsT0FBT0csS0FBS0gsS0FBSztRQUNqQlEsTUFBTUwsS0FBS0ssSUFBSTtRQUNmQyxPQUFPTixLQUFLTyxjQUFjO0lBQzVCO0FBQ0Y7QUFFTyxlQUFlQyxhQUNwQlgsS0FBYSxFQUNiRSxlQUFvQztJQUVwQyxNQUFNQyxPQUFPLE1BQU1ELGdCQUFnQkUsT0FBTyxDQUFDO1FBQUVKLE9BQU9BO0lBQU07SUFFMUQsTUFBTVksT0FBT1QsTUFBTVM7SUFDbkIsTUFBTUMsS0FBS1YsTUFBTVc7SUFFakIsT0FBTztRQUFFRjtRQUFNQztJQUFHO0FBQ3BCO0FBRU8sU0FBU0Usc0JBQXNCQyxDQUFTO0lBQzdDLE9BQU9BLEVBQUVDLE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQUtGLEVBQUVHLEtBQUssQ0FBQztBQUM3QztBQUVBLGFBQWE7QUFDTixNQUFNQyxVQUFVLENBQUMsR0FBR0MsT0FDekIsYUFBYTtJQUViQyxTQUFTRCxNQUNORSxJQUFJLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSUMsSUFBSSxJQUN0QkMsS0FBSyxDQUFDLENBQUNDLE1BQVF0QixRQUFRdUIsS0FBSyxDQUFDRCxNQUFNO0FBRWpDLFNBQVNFLGFBQWFqQixJQUFrQjtJQUM3QyxJQUFJa0IsWUFBWTtJQUNoQixJQUFJbEIsU0FBUyxXQUFXO1FBQ3RCa0IsWUFBWTtJQUNkLE9BQU8sSUFBSWxCLFNBQVMsV0FBV0EsU0FBUyxPQUFPO1FBQzdDa0IsWUFBWTtJQUNkLE9BQU8sSUFBSWxCLFNBQVMsV0FBVztRQUM3QmtCLFlBQVk7SUFDZDtJQUNBLE9BQU9BO0FBQ1Q7QUFDTyxlQUFlQyxTQUNwQkMsV0FBcUQ7SUFFckQsTUFBTUMsV0FBVyxJQUFJQztJQUVyQixxRUFBcUU7SUFDckUsTUFBTUMsaUJBQWlCO1FBQ3JCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsNkVBQTZFO0lBRTdFLElBQUssSUFBSUMsT0FBT0osWUFBYTtRQUMzQixJQUNFRyxlQUFlRSxRQUFRLENBQUNELFFBQ3hCSixXQUFXLENBQUNJLElBQW9DLEVBQ2hEO1lBQ0EsYUFBYTtZQUNiSCxTQUFTSyxNQUFNLENBQUNGLEtBQUtKLFdBQVcsQ0FBQ0ksSUFBSTtRQUN2QztJQUNGO0lBQ0EsSUFBSSxDQUFDSCxTQUFTTSxHQUFHLENBQUMsbUJBQW1CO1FBQ25DTixTQUFTTyxNQUFNLENBQUM7SUFDbEI7SUFDQSxJQUFJUixZQUFZUyxjQUFjLENBQUMsUUFBUTtRQUNyQ1IsU0FBU0ssTUFBTSxDQUFDLFVBQVVOLFlBQVlsQixHQUFHO0lBQzNDO0lBRUEsTUFBTVUsTUFBTSxNQUFNRixNQUFNLGFBQWE7UUFDbkNvQixRQUFRO1FBQ1JDLE1BQU1WO0lBQ1I7SUFFQSxPQUFPVDtBQUNUO0FBRU8sU0FBU29CLGVBQWVDLElBQVU7SUFDdkMsTUFBTUMsT0FBT0QsS0FBS0Usa0JBQWtCLENBQUMsRUFBRSxFQUFFO1FBQ3ZDQyxNQUFNO1FBQ05DLFFBQVE7SUFDVjtJQUNBLE1BQU1DLGdCQUFnQkosS0FBS0ssV0FBVyxHQUFHQyxPQUFPLENBQUMsT0FBTztJQUV4RCxNQUFNQyxnQkFBZ0JSLEtBQUtTLGtCQUFrQixDQUFDO1FBQUM7S0FBUSxFQUFFO1FBQ3ZEQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsTUFBTTtJQUNSO0lBRUEsTUFBTUMsb0JBQW9CLENBQUMsRUFBRVIsY0FBYyxHQUFHLEVBQUVHLGNBQWMsQ0FBQztJQUMvRCxPQUFPSztBQUNUO0FBRU8sU0FBU0MsZUFBZUMsSUFBWTtJQUN6QyxNQUFNQyxnQkFBZ0I7SUFFdEIsNkRBQTZEO0lBQzdELE1BQU1DLGFBQWFGLEtBQUtSLE9BQU8sQ0FBQ1MsZUFBZTtJQUUvQyxPQUFPQztBQUNUO0FBRU8sU0FBU0MsY0FBY0MsV0FBbUIsRUFBRXBELElBQVksRUFBRXFELElBQVk7SUFDM0UsTUFBTSxFQUFFQyxJQUFJLEVBQUV0QyxLQUFLLEVBQUV1QyxTQUFTLEVBQUVDLE1BQU0sRUFBRSxHQUFHdEUsK0NBQU1BLENBQy9DLENBQUMsaUNBQWlDLEVBQUVrRSxZQUFZLE1BQU0sRUFBRUMsS0FBSyxNQUFNLEVBQUVyRCxLQUFLLENBQUMsRUFDM0VRO0lBRUYsT0FBTztRQUNMaUQsT0FBT0g7UUFDUEM7UUFDQXZDLE9BQU9BO1FBQ1B3QztJQUNGO0FBQ0Y7QUFFTyxTQUFTRSxXQUNkTCxJQUFZLEVBQ1pNLE1BQWMsRUFDZEMsSUFBcUQ7SUFFckQsTUFBTSxFQUFFTixJQUFJLEVBQUVDLFNBQVMsRUFBRXZDLEtBQUssRUFBRXdDLE1BQU0sRUFBRSxHQUFHdEUsK0NBQU1BLENBQy9DLENBQUMsc0JBQXNCLEVBQUVtRSxLQUFLLE1BQU0sRUFBRU8sS0FBSyxhQUFhLEVBQUVELE9BQU8sQ0FBQyxFQUNsRW5EO0lBRUYsT0FBTztRQUNMcUQsU0FBU1A7UUFDVEM7UUFDQXZDO1FBQ0F3QztJQUNGO0FBQ0Y7QUFDTyxTQUFTTSxjQUFjQyxRQUFnQjtJQUM1QyxNQUFNLEVBQUVULElBQUksRUFBRXRDLEtBQUssRUFBRXVDLFNBQVMsRUFBRUMsTUFBTSxFQUFFLEdBQUd0RSwrQ0FBTUEsQ0FDL0MsQ0FBQyxZQUFZLEVBQUU2RSxTQUFTLENBQUMsRUFDekJ2RDtJQUVGLE9BQU87UUFDTHdELFFBQVFWO1FBQ1JDO1FBQ0F2QztRQUNBd0M7SUFDRjtBQUNGO0FBRU8sU0FBU1MsaUJBQ2RGLFFBQWdCLEVBQ2hCVixJQUFZLEVBQ1pNLE1BQWMsRUFDZE8sVUFBaUMsRUFDakNDLGtCQUFrQixLQUFLO0lBRXZCLE1BQU0sRUFBRWIsSUFBSSxFQUFFdEMsS0FBSyxFQUFFdUMsU0FBUyxFQUFFQyxNQUFNLEVBQUUsR0FBR3RFLCtDQUFNQSxDQUMvQyxDQUFDLFlBQVksRUFBRTZFLFNBQVMsYUFBYSxFQUFFVixLQUFLLFlBQVksRUFBRWEsV0FBVyxhQUFhLEVBQUVQLE9BQU8sa0JBQWtCLEVBQUVRLGdCQUFnQixDQUFDLEVBQ2hJM0Q7SUFFRixPQUFPO1FBQ0w0RCxTQUFTZDtRQUNUQztRQUNBdkM7UUFDQXdDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL2xpYi9mdW5jdGlvbnMudHM/ODEyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0aW9uLCBNb25nb0NsaWVudCB9IGZyb20gXCJtb25nb2RiXCI7XHJcbmltcG9ydCB7XHJcbiAgQ291cnNlSW5mb3JtYXRpb24sXHJcbiAgUmVjZWl2ZWRVc2VyRGF0YU9uQ2xpZW50LFxyXG4gIFJvbGUsXHJcbiAgU2VudFVzZXJEYXRhRnJvbUNsaWVudCxcclxuICBVc2VyQ29sLFxyXG59IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCBtZDUgZnJvbSBcIm1kNVwiO1xyXG5pbXBvcnQgdXNlU1dSIGZyb20gXCJzd3JcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUxvZ2luKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZyxcclxuICB1c2Vyc0NvbGxlY3Rpb246IENvbGxlY3Rpb248VXNlckNvbD5cclxuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pO1xyXG4gIGNvbnNvbGUubG9nKHVzZXIpO1xyXG5cclxuICBjb25zdCBwYXNzd29yZEhhc2ggPSBtZDUocGFzc3dvcmQpO1xyXG4gIGlmICghdXNlcikge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGlmICh1c2VyLnBhc3N3b3JkSGFzaCAhPT0gcGFzc3dvcmRIYXNoKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgIGltYWdlOiB1c2VyLnByb2ZpbGVQaWN0dXJlLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSb2xlQW5kSWQoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICB1c2Vyc0NvbGxlY3Rpb246IENvbGxlY3Rpb248VXNlckNvbD5cclxuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pO1xyXG5cclxuICBjb25zdCByb2xlID0gdXNlcj8ucm9sZTtcclxuICBjb25zdCBpZCA9IHVzZXI/Ll9pZDtcclxuXHJcbiAgcmV0dXJuIHsgcm9sZSwgaWQgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdExldHRlcihzOiBzdHJpbmcpIHtcclxuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XHJcbn1cclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuZXhwb3J0IGNvbnN0IGZldGNoZXIgPSAoLi4uYXJncykgPT5cclxuICAvLyBAdHMtaWdub3JlXHJcblxyXG4gIGZldGNoKC4uLmFyZ3MpXHJcbiAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9sZUNvbG9yKHJvbGU6IFJvbGUgfCBcIkFsbFwiKSB7XHJcbiAgbGV0IHJvbGVDb2xvciA9IFwiZ3JheVwiO1xyXG4gIGlmIChyb2xlID09PSBcIlN0dWRlbnRcIikge1xyXG4gICAgcm9sZUNvbG9yID0gXCJibHVlXCI7XHJcbiAgfSBlbHNlIGlmIChyb2xlID09PSBcIkFkbWluXCIgfHwgcm9sZSA9PT0gXCJBbGxcIikge1xyXG4gICAgcm9sZUNvbG9yID0gXCJyZWRcIjtcclxuICB9IGVsc2UgaWYgKHJvbGUgPT09IFwiRmFjdWx0eVwiKSB7XHJcbiAgICByb2xlQ29sb3IgPSBcImdyZWVuXCI7XHJcbiAgfVxyXG4gIHJldHVybiByb2xlQ29sb3I7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVkaXRVc2VyKFxyXG4gIG5ld1VzZXJEYXRhOiBTZW50VXNlckRhdGFGcm9tQ2xpZW50ICYgeyBfaWQ6IHN0cmluZyB9XHJcbikge1xyXG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcblxyXG4gIC8vYWxsb3dlZCBlbnRyaWVzIGFyZSBuYW1lLCBwcm9maWxlIHBpY3R1cmUsIHBob25lIGFuZCBwYXNzd29yZCBvbmx5OlxyXG4gIGNvbnN0IGFsbG93ZWRFbnRyaWVzID0gW1xyXG4gICAgXCJuYW1lXCIsXHJcbiAgICBcInBob25lXCIsXHJcbiAgICBcInBhc3N3b3JkXCIsXHJcbiAgICBcInByb2ZpbGVQaWN0dXJlXCIsXHJcbiAgICBcInVzZXJJZFwiLFxyXG4gICAgXCJvbGRQaWN0dXJlXCIsXHJcbiAgXTtcclxuXHJcbiAgLy8gdGhlIGtleSBzaG91bGQgb25seSBjb25zaWRlciB0aG9zZSBlbnRyaWVzIHdoaWNoIGFyZSBub3QgZW1wdHkgYW5kIGFsbG93ZWRcclxuXHJcbiAgZm9yIChsZXQga2V5IGluIG5ld1VzZXJEYXRhKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGFsbG93ZWRFbnRyaWVzLmluY2x1ZGVzKGtleSkgJiZcclxuICAgICAgbmV3VXNlckRhdGFba2V5IGFzIGtleW9mIFNlbnRVc2VyRGF0YUZyb21DbGllbnRdXHJcbiAgICApIHtcclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCBuZXdVc2VyRGF0YVtrZXldKTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKCFmb3JtRGF0YS5nZXQoXCJwcm9maWxlUGljdHVyZVwiKSkge1xyXG4gICAgZm9ybURhdGEuZGVsZXRlKFwib2xkUGljdHVyZVwiKTtcclxuICB9XHJcbiAgaWYgKG5ld1VzZXJEYXRhLmhhc093blByb3BlcnR5KFwiX2lkXCIpKSB7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJ1c2VySWRcIiwgbmV3VXNlckRhdGEuX2lkKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS91c2VyXCIsIHtcclxuICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgIGJvZHk6IGZvcm1EYXRhLFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoZGF0ZTogRGF0ZSkge1xyXG4gIGNvbnN0IHRpbWUgPSBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyhbXSwge1xyXG4gICAgaG91cjogXCJudW1lcmljXCIsXHJcbiAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxyXG4gIH0pO1xyXG4gIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSB0aW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csIFwiXCIpO1xyXG5cclxuICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoW1wiZW4tR0JcIl0sIHtcclxuICAgIGRheTogXCIyLWRpZ2l0XCIsXHJcbiAgICBtb250aDogXCIyLWRpZ2l0XCIsXHJcbiAgICB5ZWFyOiBcIm51bWVyaWNcIixcclxuICB9KTtcclxuXHJcbiAgY29uc3QgZm9ybWF0dGVkRGF0ZVRpbWUgPSBgJHtmb3JtYXR0ZWRUaW1lfSDigKIgJHtmb3JtYXR0ZWREYXRlfWA7XHJcbiAgcmV0dXJuIGZvcm1hdHRlZERhdGVUaW1lO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlTWFya2Rvd24odGV4dDogc3RyaW5nKSB7XHJcbiAgY29uc3QgbWFya2Rvd25SZWdleCA9IC9bI1xcXVsqX35gIUAjJCVeJiooKVwiJ10vZztcclxuXHJcbiAgLy8gUmVwbGFjZSBhbGwgbWF0Y2hlZCBtYXJrZG93biBlbGVtZW50cyB3aXRoIGFuIGVtcHR5IHN0cmluZ1xyXG4gIGNvbnN0IHJlc3VsdFRleHQgPSB0ZXh0LnJlcGxhY2UobWFya2Rvd25SZWdleCwgXCJcIik7XHJcblxyXG4gIHJldHVybiByZXN1bHRUZXh0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlVXNlclNlYXJjaChzZWFyY2hRdWVyeTogc3RyaW5nLCByb2xlOiBzdHJpbmcsIHBhZ2U6IG51bWJlcikge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IsIGlzTG9hZGluZywgbXV0YXRlIH0gPSB1c2VTV1IoXHJcbiAgICBgL2FwaS9hbGxVc2Vycy9zZWFyY2g/c2VhcmNoUXVlcnk9JHtzZWFyY2hRdWVyeX0mcGFnZT0ke3BhZ2V9JnJvbGU9JHtyb2xlfWAsXHJcbiAgICBmZXRjaGVyXHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgdXNlcnM6IGRhdGEgYXMgUmVjZWl2ZWRVc2VyRGF0YU9uQ2xpZW50W10sXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcjogZXJyb3IsXHJcbiAgICBtdXRhdGUsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvdXJzZXMoXHJcbiAgcGFnZTogbnVtYmVyLFxyXG4gIHNlYXJjaDogc3RyaW5nLFxyXG4gIHR5cGU6IFwiYWxsXCIgfCBcImVucm9sbGVkXCIgfCBcIm5vdGVucm9sbGVkXCIgfCBcInRlYWNoaW5nXCJcclxuKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBpc0xvYWRpbmcsIGVycm9yLCBtdXRhdGUgfSA9IHVzZVNXUihcclxuICAgIGAvYXBpL2NvdXJzZS9saXN0P3BhZ2U9JHtwYWdlfSZ0eXBlPSR7dHlwZX0mc2VhcmNoUXVlcnk9JHtzZWFyY2h9YCxcclxuICAgIGZldGNoZXJcclxuICApO1xyXG4gIHJldHVybiB7XHJcbiAgICBjb3Vyc2VzOiBkYXRhLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICBtdXRhdGUsXHJcbiAgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQ291cnNlUGFnZShjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciwgaXNMb2FkaW5nLCBtdXRhdGUgfSA9IHVzZVNXUihcclxuICAgIGAvYXBpL2NvdXJzZS8ke2NvdXJzZUlkfWAsXHJcbiAgICBmZXRjaGVyXHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgY291cnNlOiBkYXRhIGFzIENvdXJzZUluZm9ybWF0aW9uLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICBtdXRhdGUsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvdXJzZU1lbWJlcnMoXHJcbiAgY291cnNlSWQ6IHN0cmluZyxcclxuICBwYWdlOiBudW1iZXIsXHJcbiAgc2VhcmNoOiBzdHJpbmcsXHJcbiAgbWVtYmVyVHlwZTogXCJzdHVkZW50XCIgfCBcImZhY3VsdHlcIixcclxuICBub3RFbnJvbGxlZE9ubHkgPSBmYWxzZVxyXG4pIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yLCBpc0xvYWRpbmcsIG11dGF0ZSB9ID0gdXNlU1dSKFxyXG4gICAgYC9hcGkvY291cnNlLyR7Y291cnNlSWR9L21lbWJlcj9wYWdlPSR7cGFnZX0mbWVtYmVyVHlwZT0ke21lbWJlclR5cGV9JnNlYXJjaFF1ZXJ5PSR7c2VhcmNofSYmbm90RW5yb2xsZWRPbmx5PSR7bm90RW5yb2xsZWRPbmx5fWAsXHJcbiAgICBmZXRjaGVyXHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgbWVtYmVyczogZGF0YSBhcyBSZWNlaXZlZFVzZXJEYXRhT25DbGllbnRbXSxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgbXV0YXRlLFxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIm1kNSIsInVzZVNXUiIsInZhbGlkYXRlTG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlcnNDb2xsZWN0aW9uIiwidXNlciIsImZpbmRPbmUiLCJjb25zb2xlIiwibG9nIiwicGFzc3dvcmRIYXNoIiwibmFtZSIsImltYWdlIiwicHJvZmlsZVBpY3R1cmUiLCJnZXRSb2xlQW5kSWQiLCJyb2xlIiwiaWQiLCJfaWQiLCJjYXBpdGFsaXplRmlyc3RMZXR0ZXIiLCJzIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImZldGNoZXIiLCJhcmdzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJnZXRSb2xlQ29sb3IiLCJyb2xlQ29sb3IiLCJlZGl0VXNlciIsIm5ld1VzZXJEYXRhIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFsbG93ZWRFbnRyaWVzIiwia2V5IiwiaW5jbHVkZXMiLCJhcHBlbmQiLCJnZXQiLCJkZWxldGUiLCJoYXNPd25Qcm9wZXJ0eSIsIm1ldGhvZCIsImJvZHkiLCJmb3JtYXREYXRlVGltZSIsImRhdGUiLCJ0aW1lIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsImZvcm1hdHRlZFRpbWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJmb3JtYXR0ZWREYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZGF5IiwibW9udGgiLCJ5ZWFyIiwiZm9ybWF0dGVkRGF0ZVRpbWUiLCJlc2NhcGVNYXJrZG93biIsInRleHQiLCJtYXJrZG93blJlZ2V4IiwicmVzdWx0VGV4dCIsInVzZVVzZXJTZWFyY2giLCJzZWFyY2hRdWVyeSIsInBhZ2UiLCJkYXRhIiwiaXNMb2FkaW5nIiwibXV0YXRlIiwidXNlcnMiLCJ1c2VDb3Vyc2VzIiwic2VhcmNoIiwidHlwZSIsImNvdXJzZXMiLCJ1c2VDb3Vyc2VQYWdlIiwiY291cnNlSWQiLCJjb3Vyc2UiLCJ1c2VDb3Vyc2VNZW1iZXJzIiwibWVtYmVyVHlwZSIsIm5vdEVucm9sbGVkT25seSIsIm1lbWJlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/functions.ts\n");

/***/ }),

/***/ "(api)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteFile: () => (/* binding */ deleteFile),\n/* harmony export */   getFileUrl: () => (/* binding */ getFileUrl),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n\nconst SUPABASE_URL = process.env.SUPABASE_URL;\nconst SUPABASE_ANON_KEY = process.env.SUPABASE_ANON_KEY;\n\n\nif (!SUPABASE_URL) {\n    throw new Error(\"Missing env.SUPABASE_URL\");\n}\nif (!SUPABASE_ANON_KEY) {\n    throw new Error(\"Missing env.SUPABASE_ANON_KEY\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_ANON_KEY);\nconst bucketName = \"postgres\";\nasync function getFileUrl(filepath, bucketFolder, originalFilename) {\n    console.log(supabase.storage.from(bucketName));\n    const compressedFile = sharp__WEBPACK_IMPORTED_MODULE_1___default()(filepath).resize(1280);\n    const compressedFilePath = filepath + \"-compressed\";\n    await compressedFile.toFile(compressedFilePath);\n    filepath = compressedFilePath;\n    const file = await fs__WEBPACK_IMPORTED_MODULE_2__.promises.open(filepath, \"r\");\n    const fileData = await file.readFile();\n    originalFilename = originalFilename.replace(/ /g, \"_\");\n    console.log(bucketFolder + \"/\" + originalFilename);\n    const { data: uploadData, error } = await supabase.storage.from(bucketName).upload(bucketFolder + \"/\" + originalFilename, fileData);\n    if (error) {\n        throw error;\n    }\n    const { data } = await supabase.storage.from(\"postgres\").getPublicUrl(uploadData.path);\n    file.close();\n    return data.publicUrl;\n}\nasync function deleteFile(fileUrl) {\n    // Extract the filename from the image URL\n    const fileUrlArr = fileUrl.split(\"/\");\n    const bucketNameIndex = fileUrlArr.indexOf(bucketName) + 1;\n    const fileName = decodeURI(fileUrlArr.slice(bucketNameIndex).join(\"/\"));\n    // Delete the file from Supabase storage\n    const { error } = await supabase.storage.from(bucketName).remove([\n        fileName\n    ]);\n    if (error) {\n        return 500;\n    } else {\n        return 200;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ3JELE1BQU1DLGVBQWVDLFFBQVFDLEdBQUcsQ0FBQ0YsWUFBWTtBQUM3QyxNQUFNRyxvQkFBb0JGLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0FBQzdCO0FBQ1U7QUFDcEMsSUFBSSxDQUFDSCxjQUFjO0lBQ2pCLE1BQU0sSUFBSU8sTUFBTTtBQUNsQjtBQUNBLElBQUksQ0FBQ0osbUJBQW1CO0lBQ3RCLE1BQU0sSUFBSUksTUFBTTtBQUNsQjtBQUNPLE1BQU1DLFdBQVdULG1FQUFZQSxDQUFDQyxjQUFjRyxtQkFBbUI7QUFDdEUsTUFBTU0sYUFBYTtBQUNaLGVBQWVDLFdBQ3BCQyxRQUFhLEVBQ2JDLFlBQW9CLEVBQ3BCQyxnQkFBd0I7SUFFeEJDLFFBQVFDLEdBQUcsQ0FBQ1AsU0FBU1EsT0FBTyxDQUFDQyxJQUFJLENBQUNSO0lBQ2xDLE1BQU1TLGlCQUFpQmQsNENBQUtBLENBQUNPLFVBQVVRLE1BQU0sQ0FBQztJQUM5QyxNQUFNQyxxQkFBcUJULFdBQVc7SUFDdEMsTUFBTU8sZUFBZUcsTUFBTSxDQUFDRDtJQUM1QlQsV0FBV1M7SUFFWCxNQUFNRSxPQUFPLE1BQU1oQix3Q0FBRUEsQ0FBQ2lCLElBQUksQ0FBQ1osVUFBVTtJQUVyQyxNQUFNYSxXQUFXLE1BQU1GLEtBQUtHLFFBQVE7SUFDcENaLG1CQUFtQkEsaUJBQWlCYSxPQUFPLENBQUMsTUFBTTtJQUNsRFosUUFBUUMsR0FBRyxDQUFDSCxlQUFlLE1BQU1DO0lBQ2pDLE1BQU0sRUFBRWMsTUFBTUMsVUFBVSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNckIsU0FBU1EsT0FBTyxDQUN2REMsSUFBSSxDQUFDUixZQUNMcUIsTUFBTSxDQUFDbEIsZUFBZSxNQUFNQyxrQkFBa0JXO0lBRWpELElBQUlLLE9BQU87UUFDVCxNQUFNQTtJQUNSO0lBRUEsTUFBTSxFQUFFRixJQUFJLEVBQUUsR0FBRyxNQUFNbkIsU0FBU1EsT0FBTyxDQUFDQyxJQUFJLENBQUMsWUFBWWMsWUFBWSxDQUFDSCxXQUFZSSxJQUFJO0lBRXRGVixLQUFLVyxLQUFLO0lBQ1YsT0FBT04sS0FBS08sU0FBUztBQUN2QjtBQUVPLGVBQWVDLFdBQVdDLE9BQWU7SUFDOUMsMENBQTBDO0lBQzFDLE1BQU1DLGFBQWFELFFBQVFFLEtBQUssQ0FBQztJQUVqQyxNQUFNQyxrQkFBa0JGLFdBQVdHLE9BQU8sQ0FBQy9CLGNBQWM7SUFDekQsTUFBTWdDLFdBQVdDLFVBQVVMLFdBQVdNLEtBQUssQ0FBQ0osaUJBQWlCSyxJQUFJLENBQUM7SUFFbEUsd0NBQXdDO0lBQ3hDLE1BQU0sRUFBRWYsS0FBSyxFQUFFLEdBQUcsTUFBTXJCLFNBQVNRLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDUixZQUFZb0MsTUFBTSxDQUFDO1FBQUNKO0tBQVM7SUFFM0UsSUFBSVosT0FBTztRQUNULE9BQU87SUFDVCxPQUFPO1FBQ0wsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9saWIvc3VwYWJhc2UudHM/Yzk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XHJcbmNvbnN0IFNVUEFCQVNFX1VSTCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTDtcclxuY29uc3QgU1VQQUJBU0VfQU5PTl9LRVkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9BTk9OX0tFWTtcclxuaW1wb3J0IHNoYXJwIGZyb20gXCJzaGFycFwiO1xyXG5pbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gXCJmc1wiO1xyXG5pZiAoIVNVUEFCQVNFX1VSTCkge1xyXG4gIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZW52LlNVUEFCQVNFX1VSTFwiKTtcclxufVxyXG5pZiAoIVNVUEFCQVNFX0FOT05fS0VZKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBlbnYuU1VQQUJBU0VfQU5PTl9LRVlcIik7XHJcbn1cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFNVUEFCQVNFX1VSTCwgU1VQQUJBU0VfQU5PTl9LRVkpO1xyXG5jb25zdCBidWNrZXROYW1lID0gXCJwb3N0Z3Jlc1wiO1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsZVVybChcclxuICBmaWxlcGF0aDogYW55LFxyXG4gIGJ1Y2tldEZvbGRlcjogc3RyaW5nLFxyXG4gIG9yaWdpbmFsRmlsZW5hbWU6IHN0cmluZ1xyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnNvbGUubG9nKHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXROYW1lKSk7XHJcbiAgY29uc3QgY29tcHJlc3NlZEZpbGUgPSBzaGFycChmaWxlcGF0aCkucmVzaXplKDEyODApO1xyXG4gIGNvbnN0IGNvbXByZXNzZWRGaWxlUGF0aCA9IGZpbGVwYXRoICsgXCItY29tcHJlc3NlZFwiO1xyXG4gIGF3YWl0IGNvbXByZXNzZWRGaWxlLnRvRmlsZShjb21wcmVzc2VkRmlsZVBhdGgpO1xyXG4gIGZpbGVwYXRoID0gY29tcHJlc3NlZEZpbGVQYXRoO1xyXG5cclxuICBjb25zdCBmaWxlID0gYXdhaXQgZnMub3BlbihmaWxlcGF0aCwgXCJyXCIpO1xyXG4gIFxyXG4gIGNvbnN0IGZpbGVEYXRhID0gYXdhaXQgZmlsZS5yZWFkRmlsZSgpO1xyXG4gIG9yaWdpbmFsRmlsZW5hbWUgPSBvcmlnaW5hbEZpbGVuYW1lLnJlcGxhY2UoLyAvZywgXCJfXCIpO1xyXG4gIGNvbnNvbGUubG9nKGJ1Y2tldEZvbGRlciArIFwiL1wiICsgb3JpZ2luYWxGaWxlbmFtZSk7XHJcbiAgY29uc3QgeyBkYXRhOiB1cGxvYWREYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgLmZyb20oYnVja2V0TmFtZSlcclxuICAgIC51cGxvYWQoYnVja2V0Rm9sZGVyICsgXCIvXCIgKyBvcmlnaW5hbEZpbGVuYW1lLCBmaWxlRGF0YSk7XHJcbiAgXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKFwicG9zdGdyZXNcIikuZ2V0UHVibGljVXJsKHVwbG9hZERhdGEhLnBhdGgpO1xyXG4gIFxyXG4gIGZpbGUuY2xvc2UoKTtcclxuICByZXR1cm4gZGF0YS5wdWJsaWNVcmw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaWxlKGZpbGVVcmw6IHN0cmluZykge1xyXG4gIC8vIEV4dHJhY3QgdGhlIGZpbGVuYW1lIGZyb20gdGhlIGltYWdlIFVSTFxyXG4gIGNvbnN0IGZpbGVVcmxBcnIgPSBmaWxlVXJsLnNwbGl0KFwiL1wiKTtcclxuXHJcbiAgY29uc3QgYnVja2V0TmFtZUluZGV4ID0gZmlsZVVybEFyci5pbmRleE9mKGJ1Y2tldE5hbWUpICsgMTtcclxuICBjb25zdCBmaWxlTmFtZSA9IGRlY29kZVVSSShmaWxlVXJsQXJyLnNsaWNlKGJ1Y2tldE5hbWVJbmRleCkuam9pbihcIi9cIikpO1xyXG5cclxuICAvLyBEZWxldGUgdGhlIGZpbGUgZnJvbSBTdXBhYmFzZSBzdG9yYWdlXHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKGJ1Y2tldE5hbWUpLnJlbW92ZShbZmlsZU5hbWVdKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gNTAwO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gMjAwO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiU1VQQUJBU0VfVVJMIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX0FOT05fS0VZIiwic2hhcnAiLCJwcm9taXNlcyIsImZzIiwiRXJyb3IiLCJzdXBhYmFzZSIsImJ1Y2tldE5hbWUiLCJnZXRGaWxlVXJsIiwiZmlsZXBhdGgiLCJidWNrZXRGb2xkZXIiLCJvcmlnaW5hbEZpbGVuYW1lIiwiY29uc29sZSIsImxvZyIsInN0b3JhZ2UiLCJmcm9tIiwiY29tcHJlc3NlZEZpbGUiLCJyZXNpemUiLCJjb21wcmVzc2VkRmlsZVBhdGgiLCJ0b0ZpbGUiLCJmaWxlIiwib3BlbiIsImZpbGVEYXRhIiwicmVhZEZpbGUiLCJyZXBsYWNlIiwiZGF0YSIsInVwbG9hZERhdGEiLCJlcnJvciIsInVwbG9hZCIsImdldFB1YmxpY1VybCIsInBhdGgiLCJjbG9zZSIsInB1YmxpY1VybCIsImRlbGV0ZUZpbGUiLCJmaWxlVXJsIiwiZmlsZVVybEFyciIsInNwbGl0IiwiYnVja2V0TmFtZUluZGV4IiwiaW5kZXhPZiIsImZpbGVOYW1lIiwiZGVjb2RlVVJJIiwic2xpY2UiLCJqb2luIiwicmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/functions */ \"(api)/./lib/functions.ts\");\n/* harmony import */ var _lib_DB__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/DB */ \"(api)/./lib/DB.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_functions__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_functions__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst secret = process.env.SECRET;\n\nif (!secret) {\n    throw new Error(\"Missing SECRET environment variable. Add it and restart the server\");\n}\nconst authOptions = {\n    secret: secret,\n    pages: {\n        signIn: \"/Auth/Signin\"\n    },\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Email\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"text\",\n                    placeholder: \"test@example.com\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials, req) {\n                try {\n                    console.log(credentials);\n                    const usersCollection = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\").collection(\"Users\");\n                    console.log(usersCollection);\n                    const user = await (0,_lib_functions__WEBPACK_IMPORTED_MODULE_2__.validateLogin)(credentials.email, credentials.password, usersCollection);\n                    console.log(user);\n                    if (user) {\n                        return user;\n                    } else {\n                        return null;\n                    }\n                } catch (error) {\n                    console.error(\"Error in authorize:\", error);\n                    throw new Error(\"Authorization failed\");\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async session ({ session, token, user }) {\n            try {\n                const usersCollection = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\").collection(\"Users\");\n                const { role, id } = await (0,_lib_functions__WEBPACK_IMPORTED_MODULE_2__.getRoleAndId)(session.user.email, usersCollection);\n                session.user.id = id;\n                session.user.role = role;\n                return session;\n            } catch (error) {\n                console.error(\"Error in session callback:\", error);\n                throw new Error(\"Session callback failed\");\n            }\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWlDO0FBRWlDO0FBQ0c7QUFLckUsTUFBTUksU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxNQUFNO0FBQ2U7QUFFaEQsSUFBSSxDQUFDSCxRQUFRO0lBQ1gsTUFBTSxJQUFJSyxNQUNSO0FBRUo7QUFDTyxNQUFNQyxjQUFjO0lBQ3pCTixRQUFRQTtJQUNSTyxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxXQUFXO1FBQ1RaLHNFQUFtQkEsQ0FBQztZQUNsQmEsTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUNMQyxPQUFPO29CQUNQQyxNQUFNO29CQUNOQyxhQUFhO2dCQUNmO2dCQUNBQyxVQUFVO29CQUFFSCxPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUcsV0FBVU4sV0FBZ0IsRUFBRU8sR0FBUTtnQkFDeEMsSUFBSTtvQkFDRkMsUUFBUUMsR0FBRyxDQUFDVDtvQkFDWixNQUFNVSxrQkFBa0IsQ0FBQyxNQUFNakIsa0RBQVksRUFDeENrQixFQUFFLENBQUMsY0FDSEMsVUFBVSxDQUFVO29CQUV2QkosUUFBUUMsR0FBRyxDQUFDQztvQkFDWixNQUFNRyxPQUFPLE1BQU16Qiw2REFBYUEsQ0FDOUJZLFlBQVlDLEtBQUssRUFDakJELFlBQVlLLFFBQVEsRUFDcEJLO29CQUdGRixRQUFRQyxHQUFHLENBQUNJO29CQUNaLElBQUlBLE1BQU07d0JBQ1IsT0FBT0E7b0JBQ1QsT0FBTzt3QkFDTCxPQUFPO29CQUNUO2dCQUNGLEVBQUUsT0FBT0MsT0FBTztvQkFDZE4sUUFBUU0sS0FBSyxDQUFDLHVCQUF1QkE7b0JBQ3JDLE1BQU0sSUFBSXBCLE1BQU07Z0JBQ2xCO1lBQ0Y7UUFDRjtLQUNEO0lBRURxQixXQUFXO1FBQ1QsTUFBTUMsU0FBUSxFQUNaQSxPQUFPLEVBQ1BDLEtBQUssRUFDTEosSUFBSSxFQUtMO1lBQ0MsSUFBSTtnQkFDRixNQUFNSCxrQkFBa0IsQ0FBQyxNQUFNakIsa0RBQVksRUFDeENrQixFQUFFLENBQUMsY0FDSEMsVUFBVSxDQUFVO2dCQUV2QixNQUFNLEVBQUVNLElBQUksRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTWhDLDREQUFZQSxDQUNyQzZCLFFBQVFILElBQUksQ0FBQ1osS0FBSyxFQUNsQlM7Z0JBR0ZNLFFBQVFILElBQUksQ0FBQ00sRUFBRSxHQUFHQTtnQkFDbEJILFFBQVFILElBQUksQ0FBQ0ssSUFBSSxHQUFHQTtnQkFDcEIsT0FBT0Y7WUFDVCxFQUFFLE9BQU9GLE9BQU87Z0JBQ2ROLFFBQVFNLEtBQUssQ0FBQyw4QkFBOEJBO2dCQUM1QyxNQUFNLElBQUlwQixNQUFNO1lBQ2xCO1FBQ0Y7SUFDRjtBQUNGLEVBQUU7QUFFRixpRUFBZVQsZ0RBQVFBLENBQUNVLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzJlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gXCJuZXh0LWF1dGhcIjtcclxuaW1wb3J0IEdpdGh1YlByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dpdGh1YlwiO1xyXG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xyXG5pbXBvcnQgeyBnZXRSb2xlQW5kSWQsIHZhbGlkYXRlTG9naW4gfSBmcm9tIFwiLi4vLi4vLi4vbGliL2Z1bmN0aW9uc1wiO1xyXG5cclxuaW1wb3J0IHsgbW9uZ29VcmkgfSBmcm9tIFwiLi4vLi4vLi4vbGliL0RCXCI7XHJcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcclxuaW1wb3J0IHsgVXNlckNvbCB9IGZyb20gXCIuLi8uLi8uLi9saWIvdHlwZXNcIjtcclxuY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuU0VDUkVUO1xyXG5pbXBvcnQgeyBjbGllbnRQcm9taXNlIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9EQlwiO1xyXG5cclxuaWYgKCFzZWNyZXQpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICBcIk1pc3NpbmcgU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlLiBBZGQgaXQgYW5kIHJlc3RhcnQgdGhlIHNlcnZlclwiXHJcbiAgKTtcclxufVxyXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnMgPSB7XHJcbiAgc2VjcmV0OiBzZWNyZXQsXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogXCIvQXV0aC9TaWduaW5cIixcclxuICB9LFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6IFwiRW1haWxcIixcclxuICAgICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgICBlbWFpbDoge1xyXG4gICAgICAgICAgbGFiZWw6IFwiRW1haWxcIixcclxuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwidGVzdEBleGFtcGxlLmNvbVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFsczogYW55LCByZXE6IGFueSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhjcmVkZW50aWFscyk7XHJcbiAgICAgICAgICBjb25zdCB1c2Vyc0NvbGxlY3Rpb24gPSAoYXdhaXQgY2xpZW50UHJvbWlzZSlcclxuICAgICAgICAgICAgLmRiKFwiU2Nob29sX0FwcFwiKVxyXG4gICAgICAgICAgICAuY29sbGVjdGlvbjxVc2VyQ29sPihcIlVzZXJzXCIpO1xyXG5cclxuICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJzQ29sbGVjdGlvbik7XHJcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdmFsaWRhdGVMb2dpbihcclxuICAgICAgICAgICAgY3JlZGVudGlhbHMuZW1haWwsXHJcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxyXG4gICAgICAgICAgICB1c2Vyc0NvbGxlY3Rpb25cclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlciBhcyBhbnk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGF1dGhvcml6ZTpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aG9yaXphdGlvbiBmYWlsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSksXHJcbiAgXSxcclxuXHJcbiAgY2FsbGJhY2tzOiB7XHJcbiAgICBhc3luYyBzZXNzaW9uKHtcclxuICAgICAgc2Vzc2lvbixcclxuICAgICAgdG9rZW4sXHJcbiAgICAgIHVzZXIsXHJcbiAgICB9OiB7XHJcbiAgICAgIHNlc3Npb246IGFueTtcclxuICAgICAgdG9rZW46IGFueTtcclxuICAgICAgdXNlcjogYW55O1xyXG4gICAgfSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IChhd2FpdCBjbGllbnRQcm9taXNlKVxyXG4gICAgICAgICAgLmRiKFwiU2Nob29sX0FwcFwiKVxyXG4gICAgICAgICAgLmNvbGxlY3Rpb248VXNlckNvbD4oXCJVc2Vyc1wiKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyByb2xlLCBpZCB9ID0gYXdhaXQgZ2V0Um9sZUFuZElkKFxyXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLmVtYWlsLFxyXG4gICAgICAgICAgdXNlcnNDb2xsZWN0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gaWQ7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSByb2xlO1xyXG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBzZXNzaW9uIGNhbGxiYWNrOlwiLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBjYWxsYmFjayBmYWlsZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsImdldFJvbGVBbmRJZCIsInZhbGlkYXRlTG9naW4iLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUIiwiY2xpZW50UHJvbWlzZSIsIkVycm9yIiwiYXV0aE9wdGlvbnMiLCJwYWdlcyIsInNpZ25JbiIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInJlcSIsImNvbnNvbGUiLCJsb2ciLCJ1c2Vyc0NvbGxlY3Rpb24iLCJkYiIsImNvbGxlY3Rpb24iLCJ1c2VyIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJzZXNzaW9uIiwidG9rZW4iLCJyb2xlIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/user/index.ts":
/*!*********************************!*\
  !*** ./pages/api/user/index.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _lib_DB__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/DB */ \"(api)/./lib/DB.ts\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/supabase */ \"(api)/./lib/supabase.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth_nextauth___WEBPACK_IMPORTED_MODULE_2__, formidable__WEBPACK_IMPORTED_MODULE_5__]);\n([_auth_nextauth___WEBPACK_IMPORTED_MODULE_2__, formidable__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nasync function handler(req, res) {\n    const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_2__.authOptions);\n    if (!session) {\n        return res.status(403).send(\"Not logged in\");\n    }\n    if (req.method === \"GET\") {\n        return GET(req, res, session);\n    } else if (req.method === \"PUT\") {\n        return PUT(req, res, session);\n    } else if (req.method === \"DELETE\") {\n        return DELETE(req, res, session);\n    } else if (req.method === \"POST\") {\n        return POST(req, res, session);\n    } else {\n        res.status(405).send(\"Method not allowed\");\n    }\n}\nasync function GET(req, res, session) {\n    const db = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\");\n    const usersCollection = db.collection(\"Users\");\n    const id = session.user.id;\n    const user = await usersCollection.findOne({\n        _id: id\n    }, {\n        projection: {\n            notifications: 0,\n            notificationsCount: 0,\n            seenNotifications: 0,\n            seenNotificationsCount: 0,\n            passwordHash: 0\n        }\n    });\n    return res.json(user);\n}\nasync function PUT(req, res, session) {\n    const formData = await new Promise((resolve, reject)=>{\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_5__.IncomingForm();\n        form.parse(req, (err, fields, files)=>{\n            if (err) return reject(err);\n            resolve({\n                fields,\n                files\n            });\n        });\n    });\n    const userId = formData.fields.userId?.length ? formData.fields.userId[0] : session.user.id;\n    const allowedFields = [\n        \"phone\",\n        \"profilePicture\",\n        \"oldPicture\"\n    ];\n    if (session.user.role === \"Admin\") {\n        allowedFields.push(\"name\", \"passwordHash\");\n    }\n    const userDoc = {};\n    for (let f of Object.keys(formData.fields)){\n        if (formData.fields[f].length) {\n            userDoc[f] = formData.fields[f][0];\n        }\n    }\n    const allowedFileTypes = [\n        \"image/png\",\n        \"image/jpg\",\n        \"image/jpeg\"\n    ];\n    if (formData.files.profilePicture?.length) {\n        if (allowedFileTypes.includes(formData.files.profilePicture[0].mimetype)) {\n            try {\n                userDoc.profilePicture = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_6__.getFileUrl)(formData.files.profilePicture[0].filepath, \"profile pic/\" + userId.toString(), formData.files.profilePicture[0].originalFilename);\n            } catch (e) {\n                return res.status(400).send(`You can not upload a file with this name ${formData.files.profilePicture[0].originalFilename}, change the file or file name`);\n            }\n        } else {\n            return res.status(400).send(\"Invalid file type\");\n        }\n    }\n    const db = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\");\n    const usersCollection = db.collection(\"Users\");\n    delete userDoc[\"userId\"];\n    if (userDoc[\"oldPicture\"]) {\n        await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_6__.deleteFile)(userDoc[\"oldPicture\"]);\n    }\n    delete userDoc[\"oldPicture\"];\n    if (userDoc.password) {\n        userDoc.passwordHash = md5__WEBPACK_IMPORTED_MODULE_4___default()(userDoc.password);\n        delete userDoc.password;\n    }\n    const updatingFields = Object.keys(userDoc);\n    for (let f of updatingFields){\n        if (allowedFields.includes(f)) {\n            continue;\n        } else {\n            return res.status(400).send(`You can not update field ${f}. fields that are allowed to update are ${allowedFields.join(\", \")}`);\n        }\n    }\n    const user = await usersCollection.updateOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(userId)\n    }, {\n        $set: {\n            ...userDoc\n        }\n    });\n    return res.json(user);\n}\nasync function DELETE(req, res, session) {\n    if (session.user.role !== \"Admin\") {\n        return res.status(403).send(\"Not authorized\");\n    }\n    const db = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\");\n    const usersCollection = db.collection(\"Users\");\n    const userId = req.query.userId;\n    if (!userId) {\n        return res.status(400).send(\"Provide userId in query params\");\n    }\n    const user = await usersCollection.findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(userId)\n    });\n    if (!user) {\n        return res.status(404).send(\"User not found\");\n    } else if (user.role === \"Admin\") {\n        return res.status(403).send(\"You can not delete an admin\");\n    }\n    const fileDelete = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_6__.deleteFile)(user.profilePicture);\n    const deleteRes = await usersCollection.deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(userId)\n    });\n    if (fileDelete === 500) {\n        return res.status(500).send(\"Something went wrong, profile not deleted\");\n    } else if (deleteRes.deletedCount === 0) {\n        return res.status(404).send(\"User not found\");\n    } else if (!deleteRes.acknowledged) {\n        return res.status(500).send(\"Something went wrong\");\n    }\n    return res.status(200).send(\"User deleted\");\n}\nasync function POST(req, res, session) {\n    if (session.user.role !== \"Admin\") {\n        return res.status(403).send(\"Not authorized\");\n    }\n    //   const body = req.body;\n    const formData = await new Promise((resolve, reject)=>{\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_5__.IncomingForm();\n        form.parse(req, (err, fields, files)=>{\n            if (err) return reject(err);\n            resolve({\n                fields,\n                files\n            });\n        });\n    });\n    const neededFields = [\n        \"name\",\n        \"phone\",\n        \"email\",\n        \"role\",\n        \"rollNumber\",\n        \"password\",\n        \"house\"\n    ];\n    const fields = Object.keys(formData.fields);\n    for (let f of neededFields){\n        if (fields.includes(f)) {\n            continue;\n        } else {\n            return res.status(400).send(`You need to provide ${f} in body`);\n        }\n    }\n    const newId = new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId();\n    const userDoc = {\n        _id: newId,\n        name: formData.fields.name[0],\n        phone: formData.fields.phone[0],\n        email: formData.fields.email[0],\n        role: formData.fields.role[0],\n        rollNumber: formData.fields.rollNumber[0],\n        house: formData.fields.house[0],\n        profilePicture: await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_6__.getFileUrl)(formData.files.profilePicture[0].filepath, \"profile pic/\" + newId.toString(), formData.files.profilePicture[0].originalFilename),\n        passwordHash: md5__WEBPACK_IMPORTED_MODULE_4___default()(formData.fields.password[0])\n    };\n    console.log(userDoc);\n    const db = (await _lib_DB__WEBPACK_IMPORTED_MODULE_3__.clientPromise).db(\"School_App\");\n    const usersCollection = db.collection(\"Users\");\n    if (await usersCollection.countDocuments({\n        email: userDoc.email\n    }) !== 0) {\n        return res.status(400).send(\"User with this email already exists\");\n    }\n    const insertRes = await usersCollection.insertOne(userDoc);\n    if (!insertRes.acknowledged) {\n        return res.status(500).send(\"Something went wrong\");\n    }\n    return res.status(200).send(\"User created\");\n}\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBWSxNQUFNNUQsZ0JBQWdCNkQsU0FBUyxDQUFDbEM7SUFDbEQsSUFBSSxDQUFDaUMsVUFBVVgsWUFBWSxFQUFFO1FBQzNCLE9BQU8zRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO0lBQzlCO0lBQ0EsT0FBT0gsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztBQUM5QjtBQUVPLE1BQU1xRSxTQUFTO0lBQ3BCQyxLQUFLO1FBQ0hDLFlBQVk7SUFDZDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9wYWdlcy9hcGkvdXNlci9pbmRleC50cz9lMTgyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xyXG5pbXBvcnQgeyBNb25nb0NsaWVudCwgT2JqZWN0SWQgfSBmcm9tIFwibW9uZ29kYlwiO1xyXG5pbXBvcnQgeyBtb25nb1VyaSB9IGZyb20gXCIuLi8uLi8uLi9saWIvREJcIjtcclxuaW1wb3J0IHsgTXlTZXNzaW9uLCBVc2VyQ29sIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi90eXBlc1wiO1xyXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9uZXh0XCI7XHJcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIi4uL2F1dGgvWy4uLm5leHRhdXRoXVwiO1xyXG5pbXBvcnQgeyBTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xyXG5pbXBvcnQgeyBjbGllbnRQcm9taXNlIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9EQlwiO1xyXG5pbXBvcnQgbWQ1IGZyb20gXCJtZDVcIjtcclxuaW1wb3J0IHsgSW5jb21pbmdGb3JtIH0gZnJvbSBcImZvcm1pZGFibGVcIjtcclxuaW1wb3J0IHsgZGVsZXRlRmlsZSwgZ2V0RmlsZVVybCB9IGZyb20gXCJAL2xpYi9zdXBhYmFzZVwiO1xyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKTtcclxuXHJcbiAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLnNlbmQoXCJOb3QgbG9nZ2VkIGluXCIpO1xyXG4gIH1cclxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJHRVRcIikge1xyXG4gICAgcmV0dXJuIEdFVChyZXEsIHJlcywgc2Vzc2lvbik7XHJcbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSBcIlBVVFwiKSB7XHJcbiAgICByZXR1cm4gUFVUKHJlcSwgcmVzLCBzZXNzaW9uKTtcclxuICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09IFwiREVMRVRFXCIpIHtcclxuICAgIHJldHVybiBERUxFVEUocmVxLCByZXMsIHNlc3Npb24pO1xyXG4gIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcclxuICAgIHJldHVybiBQT1NUKHJlcSwgcmVzLCBzZXNzaW9uKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cyg0MDUpLnNlbmQoXCJNZXRob2Qgbm90IGFsbG93ZWRcIik7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBHRVQoXHJcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZSxcclxuICBzZXNzaW9uOiBFeGNsdWRlPE15U2Vzc2lvbiwgbnVsbD5cclxuKSB7XHJcbiAgY29uc3QgZGIgPSAoYXdhaXQgY2xpZW50UHJvbWlzZSkuZGIoXCJTY2hvb2xfQXBwXCIpO1xyXG4gIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb248VXNlckNvbD4oXCJVc2Vyc1wiKTtcclxuXHJcbiAgY29uc3QgaWQgPSBzZXNzaW9uLnVzZXIuaWQ7XHJcblxyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc0NvbGxlY3Rpb24uZmluZE9uZShcclxuICAgIHtcclxuICAgICAgX2lkOiBpZCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3Rpb246IHtcclxuICAgICAgICBub3RpZmljYXRpb25zOiAwLFxyXG4gICAgICAgIG5vdGlmaWNhdGlvbnNDb3VudDogMCxcclxuICAgICAgICBzZWVuTm90aWZpY2F0aW9uczogMCxcclxuICAgICAgICBzZWVuTm90aWZpY2F0aW9uc0NvdW50OiAwLFxyXG4gICAgICAgIHBhc3N3b3JkSGFzaDogMCxcclxuICAgICAgfSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXMuanNvbih1c2VyKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gUFVUKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2UsXHJcbiAgc2Vzc2lvbjogRXhjbHVkZTxNeVNlc3Npb24sIG51bGw+XHJcbikge1xyXG4gIGNvbnN0IGZvcm1EYXRhOiB7XHJcbiAgICBmaWVsZHM6IHtcclxuICAgICAgW2tleTogc3RyaW5nXTogYW55O1xyXG4gICAgfTtcclxuICAgIGZpbGVzOiB7XHJcbiAgICAgIHByb2ZpbGVQaWN0dXJlPzogYW55W107XHJcbiAgICB9O1xyXG4gIH0gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEluY29taW5nRm9ybSgpO1xyXG5cclxuICAgIGZvcm0ucGFyc2UocmVxLCAoZXJyLCBmaWVsZHM6IGFueSwgZmlsZXM6IGFueSkgPT4ge1xyXG4gICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgIHJlc29sdmUoeyBmaWVsZHMsIGZpbGVzIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHVzZXJJZCA9IGZvcm1EYXRhLmZpZWxkcy51c2VySWQ/Lmxlbmd0aFxyXG4gICAgPyBmb3JtRGF0YS5maWVsZHMudXNlcklkWzBdXHJcbiAgICA6IHNlc3Npb24udXNlci5pZDtcclxuICBjb25zdCBhbGxvd2VkRmllbGRzID0gW1wicGhvbmVcIiwgXCJwcm9maWxlUGljdHVyZVwiLCBcIm9sZFBpY3R1cmVcIl07XHJcbiAgaWYgKHNlc3Npb24udXNlci5yb2xlID09PSBcIkFkbWluXCIpIHtcclxuICAgIGFsbG93ZWRGaWVsZHMucHVzaChcIm5hbWVcIiwgXCJwYXNzd29yZEhhc2hcIik7XHJcbiAgfVxyXG4gIGNvbnN0IHVzZXJEb2M6IHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICB9ID0ge307XHJcblxyXG4gIGZvciAobGV0IGYgb2YgT2JqZWN0LmtleXMoZm9ybURhdGEuZmllbGRzKSkge1xyXG4gICAgaWYgKGZvcm1EYXRhLmZpZWxkc1tmXS5sZW5ndGgpIHtcclxuICAgICAgdXNlckRvY1tmXSA9IGZvcm1EYXRhLmZpZWxkc1tmXVswXTtcclxuICAgIH1cclxuICB9XHJcbiAgY29uc3QgYWxsb3dlZEZpbGVUeXBlcyA9IFtcImltYWdlL3BuZ1wiLCBcImltYWdlL2pwZ1wiLCBcImltYWdlL2pwZWdcIl07XHJcblxyXG4gIGlmIChmb3JtRGF0YS5maWxlcy5wcm9maWxlUGljdHVyZT8ubGVuZ3RoKSB7XHJcbiAgICBpZiAoYWxsb3dlZEZpbGVUeXBlcy5pbmNsdWRlcyhmb3JtRGF0YS5maWxlcy5wcm9maWxlUGljdHVyZVswXS5taW1ldHlwZSkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB1c2VyRG9jLnByb2ZpbGVQaWN0dXJlID0gYXdhaXQgZ2V0RmlsZVVybChcclxuICAgICAgICAgIGZvcm1EYXRhLmZpbGVzLnByb2ZpbGVQaWN0dXJlWzBdLmZpbGVwYXRoLFxyXG4gICAgICAgICAgXCJwcm9maWxlIHBpYy9cIiArIHVzZXJJZC50b1N0cmluZygpLFxyXG4gICAgICAgICAgZm9ybURhdGEuZmlsZXMucHJvZmlsZVBpY3R1cmVbMF0ub3JpZ2luYWxGaWxlbmFtZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzXHJcbiAgICAgICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgICAgIC5zZW5kKFxyXG4gICAgICAgICAgICBgWW91IGNhbiBub3QgdXBsb2FkIGEgZmlsZSB3aXRoIHRoaXMgbmFtZSAke2Zvcm1EYXRhLmZpbGVzLnByb2ZpbGVQaWN0dXJlWzBdLm9yaWdpbmFsRmlsZW5hbWV9LCBjaGFuZ2UgdGhlIGZpbGUgb3IgZmlsZSBuYW1lYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiSW52YWxpZCBmaWxlIHR5cGVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBkYiA9IChhd2FpdCBjbGllbnRQcm9taXNlKS5kYihcIlNjaG9vbF9BcHBcIik7XHJcbiAgY29uc3QgdXNlcnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxVc2VyQ29sPihcIlVzZXJzXCIpO1xyXG5cclxuICBkZWxldGUgdXNlckRvY1tcInVzZXJJZFwiXTtcclxuICBpZiAodXNlckRvY1tcIm9sZFBpY3R1cmVcIl0pIHtcclxuICAgIGF3YWl0IGRlbGV0ZUZpbGUodXNlckRvY1tcIm9sZFBpY3R1cmVcIl0pO1xyXG4gIH1cclxuICBkZWxldGUgdXNlckRvY1tcIm9sZFBpY3R1cmVcIl07XHJcblxyXG4gIGlmICh1c2VyRG9jLnBhc3N3b3JkKSB7XHJcbiAgICB1c2VyRG9jLnBhc3N3b3JkSGFzaCA9IG1kNSh1c2VyRG9jLnBhc3N3b3JkKTtcclxuICAgIGRlbGV0ZSB1c2VyRG9jLnBhc3N3b3JkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdXBkYXRpbmdGaWVsZHMgPSBPYmplY3Qua2V5cyh1c2VyRG9jKTtcclxuICBmb3IgKGxldCBmIG9mIHVwZGF0aW5nRmllbGRzKSB7XHJcbiAgICBpZiAoYWxsb3dlZEZpZWxkcy5pbmNsdWRlcyhmKSkge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgICAuc2VuZChcclxuICAgICAgICAgIGBZb3UgY2FuIG5vdCB1cGRhdGUgZmllbGQgJHtmfS4gZmllbGRzIHRoYXQgYXJlIGFsbG93ZWQgdG8gdXBkYXRlIGFyZSAke2FsbG93ZWRGaWVsZHMuam9pbihcclxuICAgICAgICAgICAgXCIsIFwiXHJcbiAgICAgICAgICApfWBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICB7XHJcbiAgICAgIF9pZDogbmV3IE9iamVjdElkKHVzZXJJZCksXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAkc2V0OiB7XHJcbiAgICAgICAgLi4udXNlckRvYyxcclxuICAgICAgfSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXMuanNvbih1c2VyKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gREVMRVRFKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2UsXHJcbiAgc2Vzc2lvbjogRXhjbHVkZTxNeVNlc3Npb24sIG51bGw+XHJcbikge1xyXG4gIGlmIChzZXNzaW9uLnVzZXIucm9sZSAhPT0gXCJBZG1pblwiKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLnNlbmQoXCJOb3QgYXV0aG9yaXplZFwiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRiID0gKGF3YWl0IGNsaWVudFByb21pc2UpLmRiKFwiU2Nob29sX0FwcFwiKTtcclxuXHJcbiAgY29uc3QgdXNlcnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxVc2VyQ29sPihcIlVzZXJzXCIpO1xyXG4gIGNvbnN0IHVzZXJJZCA9IHJlcS5xdWVyeS51c2VySWQgYXMgc3RyaW5nO1xyXG4gIGlmICghdXNlcklkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJQcm92aWRlIHVzZXJJZCBpbiBxdWVyeSBwYXJhbXNcIik7XHJcbiAgfVxyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc0NvbGxlY3Rpb24uZmluZE9uZSh7XHJcbiAgICBfaWQ6IG5ldyBPYmplY3RJZCh1c2VySWQpLFxyXG4gIH0pO1xyXG4gIGlmICghdXNlcikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiVXNlciBub3QgZm91bmRcIik7XHJcbiAgfSBlbHNlIGlmICh1c2VyLnJvbGUgPT09IFwiQWRtaW5cIikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5zZW5kKFwiWW91IGNhbiBub3QgZGVsZXRlIGFuIGFkbWluXCIpO1xyXG4gIH1cclxuICBjb25zdCBmaWxlRGVsZXRlID0gYXdhaXQgZGVsZXRlRmlsZSh1c2VyIS5wcm9maWxlUGljdHVyZSk7XHJcbiAgY29uc3QgZGVsZXRlUmVzID0gYXdhaXQgdXNlcnNDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7XHJcbiAgICBfaWQ6IG5ldyBPYmplY3RJZCh1c2VySWQpLFxyXG4gIH0pO1xyXG4gIGlmIChmaWxlRGVsZXRlID09PSA1MDApIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNvbWV0aGluZyB3ZW50IHdyb25nLCBwcm9maWxlIG5vdCBkZWxldGVkXCIpO1xyXG4gIH0gZWxzZSBpZiAoZGVsZXRlUmVzLmRlbGV0ZWRDb3VudCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiVXNlciBub3QgZm91bmRcIik7XHJcbiAgfSBlbHNlIGlmICghZGVsZXRlUmVzLmFja25vd2xlZGdlZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIik7XHJcbiAgfVxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlVzZXIgZGVsZXRlZFwiKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gUE9TVChcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxyXG4gIHNlc3Npb246IEV4Y2x1ZGU8TXlTZXNzaW9uLCBudWxsPlxyXG4pIHtcclxuICBpZiAoc2Vzc2lvbi51c2VyLnJvbGUgIT09IFwiQWRtaW5cIikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5zZW5kKFwiTm90IGF1dGhvcml6ZWRcIik7XHJcbiAgfVxyXG4gIC8vICAgY29uc3QgYm9keSA9IHJlcS5ib2R5O1xyXG5cclxuICBjb25zdCBmb3JtRGF0YToge1xyXG4gICAgZmllbGRzOiB7XHJcbiAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgcGhvbmU6IHN0cmluZztcclxuICAgICAgZW1haWw6IHN0cmluZztcclxuICAgICAgcm9sZTogc3RyaW5nO1xyXG4gICAgICByb2xsTnVtYmVyOiBzdHJpbmc7XHJcbiAgICAgIHBhc3N3b3JkOiBzdHJpbmc7XHJcbiAgICAgIGhvdXNlOiBzdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgZmlsZXM6IHtcclxuICAgICAgcHJvZmlsZVBpY3R1cmU6IGFueVtdO1xyXG4gICAgfTtcclxuICB9ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBJbmNvbWluZ0Zvcm0oKTtcclxuXHJcbiAgICBmb3JtLnBhcnNlKHJlcSwgKGVyciwgZmllbGRzOiBhbnksIGZpbGVzOiBhbnkpID0+IHtcclxuICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICByZXNvbHZlKHsgZmllbGRzLCBmaWxlcyB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBuZWVkZWRGaWVsZHMgPSBbXHJcbiAgICBcIm5hbWVcIixcclxuICAgIFwicGhvbmVcIixcclxuICAgIFwiZW1haWxcIixcclxuICAgIFwicm9sZVwiLFxyXG4gICAgXCJyb2xsTnVtYmVyXCIsXHJcbiAgICBcInBhc3N3b3JkXCIsXHJcbiAgICBcImhvdXNlXCIsXHJcbiAgXTtcclxuXHJcbiAgY29uc3QgZmllbGRzID0gT2JqZWN0LmtleXMoZm9ybURhdGEuZmllbGRzKTtcclxuICBmb3IgKGxldCBmIG9mIG5lZWRlZEZpZWxkcykge1xyXG4gICAgaWYgKGZpZWxkcy5pbmNsdWRlcyhmKSkge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgWW91IG5lZWQgdG8gcHJvdmlkZSAke2Z9IGluIGJvZHlgKTtcclxuICAgIH1cclxuICB9XHJcbiAgY29uc3QgbmV3SWQgPSBuZXcgT2JqZWN0SWQoKTtcclxuICBjb25zdCB1c2VyRG9jID0ge1xyXG4gICAgX2lkOiBuZXdJZCxcclxuICAgIG5hbWU6IGZvcm1EYXRhLmZpZWxkcy5uYW1lWzBdLFxyXG4gICAgcGhvbmU6IGZvcm1EYXRhLmZpZWxkcy5waG9uZVswXSxcclxuICAgIGVtYWlsOiBmb3JtRGF0YS5maWVsZHMuZW1haWxbMF0sXHJcbiAgICByb2xlOiBmb3JtRGF0YS5maWVsZHMucm9sZVswXSxcclxuICAgIHJvbGxOdW1iZXI6IGZvcm1EYXRhLmZpZWxkcy5yb2xsTnVtYmVyWzBdLFxyXG4gICAgaG91c2U6IGZvcm1EYXRhLmZpZWxkcy5ob3VzZVswXSxcclxuICAgIHByb2ZpbGVQaWN0dXJlOiBhd2FpdCBnZXRGaWxlVXJsKFxyXG4gICAgICBmb3JtRGF0YS5maWxlcy5wcm9maWxlUGljdHVyZVswXS5maWxlcGF0aCxcclxuICAgICAgXCJwcm9maWxlIHBpYy9cIiArIG5ld0lkLnRvU3RyaW5nKCksXHJcbiAgICAgIGZvcm1EYXRhLmZpbGVzLnByb2ZpbGVQaWN0dXJlWzBdLm9yaWdpbmFsRmlsZW5hbWVcclxuICAgICksXHJcbiAgICBwYXNzd29yZEhhc2g6IG1kNShmb3JtRGF0YS5maWVsZHMucGFzc3dvcmRbMF0pLFxyXG4gIH07XHJcblxyXG4gIGNvbnNvbGUubG9nKHVzZXJEb2MpO1xyXG5cclxuICBjb25zdCBkYiA9IChhd2FpdCBjbGllbnRQcm9taXNlKS5kYihcIlNjaG9vbF9BcHBcIik7XHJcbiAgY29uc3QgdXNlcnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxVc2VyQ29sPihcIlVzZXJzXCIpO1xyXG4gIGlmICgoYXdhaXQgdXNlcnNDb2xsZWN0aW9uLmNvdW50RG9jdW1lbnRzKHsgZW1haWw6IHVzZXJEb2MuZW1haWwgfSkpICE9PSAwKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJVc2VyIHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0c1wiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGluc2VydFJlcyA9IGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5pbnNlcnRPbmUodXNlckRvYyBhcyBhbnkpO1xyXG4gIGlmICghaW5zZXJ0UmVzLmFja25vd2xlZGdlZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIik7XHJcbiAgfVxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlVzZXIgY3JlYXRlZFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJPYmplY3RJZCIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImNsaWVudFByb21pc2UiLCJtZDUiLCJJbmNvbWluZ0Zvcm0iLCJkZWxldGVGaWxlIiwiZ2V0RmlsZVVybCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwic3RhdHVzIiwic2VuZCIsIm1ldGhvZCIsIkdFVCIsIlBVVCIsIkRFTEVURSIsIlBPU1QiLCJkYiIsInVzZXJzQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJpZCIsInVzZXIiLCJmaW5kT25lIiwiX2lkIiwicHJvamVjdGlvbiIsIm5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25zQ291bnQiLCJzZWVuTm90aWZpY2F0aW9ucyIsInNlZW5Ob3RpZmljYXRpb25zQ291bnQiLCJwYXNzd29yZEhhc2giLCJqc29uIiwiZm9ybURhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZvcm0iLCJwYXJzZSIsImVyciIsImZpZWxkcyIsImZpbGVzIiwidXNlcklkIiwibGVuZ3RoIiwiYWxsb3dlZEZpZWxkcyIsInJvbGUiLCJwdXNoIiwidXNlckRvYyIsImYiLCJPYmplY3QiLCJrZXlzIiwiYWxsb3dlZEZpbGVUeXBlcyIsInByb2ZpbGVQaWN0dXJlIiwiaW5jbHVkZXMiLCJtaW1ldHlwZSIsImZpbGVwYXRoIiwidG9TdHJpbmciLCJvcmlnaW5hbEZpbGVuYW1lIiwiZSIsInBhc3N3b3JkIiwidXBkYXRpbmdGaWVsZHMiLCJqb2luIiwidXBkYXRlT25lIiwiJHNldCIsInF1ZXJ5IiwiZmlsZURlbGV0ZSIsImRlbGV0ZVJlcyIsImRlbGV0ZU9uZSIsImRlbGV0ZWRDb3VudCIsImFja25vd2xlZGdlZCIsIm5lZWRlZEZpZWxkcyIsIm5ld0lkIiwibmFtZSIsInBob25lIiwiZW1haWwiLCJyb2xsTnVtYmVyIiwiaG91c2UiLCJjb25zb2xlIiwibG9nIiwiY291bnREb2N1bWVudHMiLCJpbnNlcnRSZXMiLCJpbnNlcnRPbmUiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();